
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for the Tripper package">
      
      
      
        <link rel="canonical" href="https://EMMC-ASBL.github.io/tripper/latest/api_reference/triplestore/">
      
      
        <link rel="prev" href="../session/">
      
      
        <link rel="next" href="../triplestore_extend/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.11">
    
    
      
        <title>triplestore - Tripper</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../css/reference.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="cyan" data-md-color-accent="teal">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#triplestore" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Tripper" class="md-header__button md-logo" aria-label="Tripper" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19.5 9V1.5h-3V9h-3V1.5h-3V9h-3V1.5H4.65V9H3v1.5h18V9zm0 4.5h-3V21h-3v-7.5h-3V21h-3v-7.5H4.65V21H3v1.5h18V21h-1.5z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Tripper
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              triplestore
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/EMMC-ASBL/tripper" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    tripper
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Tripper" class="md-nav__button md-logo" aria-label="Tripper" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19.5 9V1.5h-3V9h-3V1.5h-3V9h-3V1.5H4.65V9H3v1.5h18V9zm0 4.5h-3V21h-3v-7.5h-3V21h-3v-7.5H4.65V21H3v1.5h18V21h-1.5z"/></svg>

    </a>
    Tripper
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/EMMC-ASBL/tripper" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    tripper
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tutorial
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backend_discovery/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Backend discovery
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Tools
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/datadoc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    datadoc
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Data documentation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Data documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../datadoc/introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../datadoc/documenting-a-resource/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Documenting a resource
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../datadoc/classdoc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Documenting abstract resources
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../datadoc/fetching-resources-from-a-triplestore/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Searching for and fetching resources
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../datadoc/customisation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Customisation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../datadoc/prefixes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Predefined prefixes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../datadoc/keywords/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Predefined keywords
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../units/units/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Units and quantities
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../session/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Session
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" checked>
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../errors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    errors
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../interface/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    interface
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../literal/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    literal
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../namespace/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    namespace
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../session/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    session
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    triplestore
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    triplestore
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#tripper.triplestore" class="md-nav__link">
    <span class="md-ellipsis">
      tripper.triplestore
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore" class="md-nav__link">
    <span class="md-ellipsis">
      Triplestore
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Triplestore">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.prefer_sparql" class="md-nav__link">
    <span class="md-ellipsis">
      prefer_sparql
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.add" class="md-nav__link">
    <span class="md-ellipsis">
      add()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.add_function" class="md-nav__link">
    <span class="md-ellipsis">
      add_function()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.add_mapsTo" class="md-nav__link">
    <span class="md-ellipsis">
      add_mapsTo()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.add_restriction" class="md-nav__link">
    <span class="md-ellipsis">
      add_restriction()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.add_triples" class="md-nav__link">
    <span class="md-ellipsis">
      add_triples()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.available" class="md-nav__link">
    <span class="md-ellipsis">
      available()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.bind" class="md-nav__link">
    <span class="md-ellipsis">
      bind()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.close" class="md-nav__link">
    <span class="md-ellipsis">
      close()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.create_database" class="md-nav__link">
    <span class="md-ellipsis">
      create_database()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.eval_function" class="md-nav__link">
    <span class="md-ellipsis">
      eval_function()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.expand_iri" class="md-nav__link">
    <span class="md-ellipsis">
      expand_iri()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.has" class="md-nav__link">
    <span class="md-ellipsis">
      has()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.list_databases" class="md-nav__link">
    <span class="md-ellipsis">
      list_databases()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.map" class="md-nav__link">
    <span class="md-ellipsis">
      map()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.objects" class="md-nav__link">
    <span class="md-ellipsis">
      objects()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.parse" class="md-nav__link">
    <span class="md-ellipsis">
      parse()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.predicate_objects" class="md-nav__link">
    <span class="md-ellipsis">
      predicate_objects()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.predicates" class="md-nav__link">
    <span class="md-ellipsis">
      predicates()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.prefix_iri" class="md-nav__link">
    <span class="md-ellipsis">
      prefix_iri()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.query" class="md-nav__link">
    <span class="md-ellipsis">
      query()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.remove" class="md-nav__link">
    <span class="md-ellipsis">
      remove()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.remove_database" class="md-nav__link">
    <span class="md-ellipsis">
      remove_database()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.restrictions" class="md-nav__link">
    <span class="md-ellipsis">
      restrictions()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.serialize" class="md-nav__link">
    <span class="md-ellipsis">
      serialize()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.set" class="md-nav__link">
    <span class="md-ellipsis">
      set()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.subject_objects" class="md-nav__link">
    <span class="md-ellipsis">
      subject_objects()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.subject_predicates" class="md-nav__link">
    <span class="md-ellipsis">
      subject_predicates()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.subjects" class="md-nav__link">
    <span class="md-ellipsis">
      subjects()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.triples" class="md-nav__link">
    <span class="md-ellipsis">
      triples()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.update" class="md-nav__link">
    <span class="md-ellipsis">
      update()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.value" class="md-nav__link">
    <span class="md-ellipsis">
      value()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../triplestore_extend/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    triplestore_extend
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    utils
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_9" >
        
          
          <label class="md-nav__link" for="__nav_8_9" id="__nav_8_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    backends
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_9">
            <span class="md-nav__icon md-icon"></span>
            backends
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../backends/collection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    collection
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../backends/ontopy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ontopy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../backends/rdflib/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    rdflib
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../backends/sparqlwrapper/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    sparqlwrapper
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_10" >
        
          
          <label class="md-nav__link" for="__nav_8_10" id="__nav_8_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    convert
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_10">
            <span class="md-nav__icon md-icon"></span>
            convert
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../convert/convert/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    convert
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_11" >
        
          
          <label class="md-nav__link" for="__nav_8_11" id="__nav_8_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    datadoc
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_11">
            <span class="md-nav__icon md-icon"></span>
            datadoc
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../datadoc/clitool/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    clitool
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../datadoc/context/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    context
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../datadoc/dataaccess/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    dataaccess
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../datadoc/dataset/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    dataset
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../datadoc/dictutils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    dictutils
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../datadoc/errors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    errors
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../datadoc/keywords/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    keywords
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../datadoc/prefixes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    prefixes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../datadoc/tabledoc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    tabledoc
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_12" >
        
          
          <label class="md-nav__link" for="__nav_8_12" id="__nav_8_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    mappings
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_12">
            <span class="md-nav__icon md-icon"></span>
            mappings
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mappings/mappings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    mappings
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_13" >
        
          
          <label class="md-nav__link" for="__nav_8_13" id="__nav_8_13_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    units
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_13">
            <span class="md-nav__icon md-icon"></span>
            units
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../units/units/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    units
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    For developers
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../known-issues/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Known issues
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CHANGELOG/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Changelog
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../LICENSE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    License
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#tripper.triplestore" class="md-nav__link">
    <span class="md-ellipsis">
      tripper.triplestore
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore" class="md-nav__link">
    <span class="md-ellipsis">
      Triplestore
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Triplestore">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.prefer_sparql" class="md-nav__link">
    <span class="md-ellipsis">
      prefer_sparql
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.add" class="md-nav__link">
    <span class="md-ellipsis">
      add()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.add_function" class="md-nav__link">
    <span class="md-ellipsis">
      add_function()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.add_mapsTo" class="md-nav__link">
    <span class="md-ellipsis">
      add_mapsTo()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.add_restriction" class="md-nav__link">
    <span class="md-ellipsis">
      add_restriction()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.add_triples" class="md-nav__link">
    <span class="md-ellipsis">
      add_triples()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.available" class="md-nav__link">
    <span class="md-ellipsis">
      available()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.bind" class="md-nav__link">
    <span class="md-ellipsis">
      bind()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.close" class="md-nav__link">
    <span class="md-ellipsis">
      close()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.create_database" class="md-nav__link">
    <span class="md-ellipsis">
      create_database()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.eval_function" class="md-nav__link">
    <span class="md-ellipsis">
      eval_function()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.expand_iri" class="md-nav__link">
    <span class="md-ellipsis">
      expand_iri()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.has" class="md-nav__link">
    <span class="md-ellipsis">
      has()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.list_databases" class="md-nav__link">
    <span class="md-ellipsis">
      list_databases()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.map" class="md-nav__link">
    <span class="md-ellipsis">
      map()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.objects" class="md-nav__link">
    <span class="md-ellipsis">
      objects()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.parse" class="md-nav__link">
    <span class="md-ellipsis">
      parse()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.predicate_objects" class="md-nav__link">
    <span class="md-ellipsis">
      predicate_objects()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.predicates" class="md-nav__link">
    <span class="md-ellipsis">
      predicates()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.prefix_iri" class="md-nav__link">
    <span class="md-ellipsis">
      prefix_iri()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.query" class="md-nav__link">
    <span class="md-ellipsis">
      query()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.remove" class="md-nav__link">
    <span class="md-ellipsis">
      remove()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.remove_database" class="md-nav__link">
    <span class="md-ellipsis">
      remove_database()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.restrictions" class="md-nav__link">
    <span class="md-ellipsis">
      restrictions()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.serialize" class="md-nav__link">
    <span class="md-ellipsis">
      serialize()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.set" class="md-nav__link">
    <span class="md-ellipsis">
      set()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.subject_objects" class="md-nav__link">
    <span class="md-ellipsis">
      subject_objects()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.subject_predicates" class="md-nav__link">
    <span class="md-ellipsis">
      subject_predicates()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.subjects" class="md-nav__link">
    <span class="md-ellipsis">
      subjects()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.triples" class="md-nav__link">
    <span class="md-ellipsis">
      triples()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.update" class="md-nav__link">
    <span class="md-ellipsis">
      update()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tripper.triplestore.Triplestore.value" class="md-nav__link">
    <span class="md-ellipsis">
      value()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="triplestore">triplestore<a class="headerlink" href="#triplestore" title="Permanent link">&para;</a></h1>


  <div class="doc doc-object doc-module">

<a id="tripper.triplestore"></a>
    <div class="doc doc-contents first">

      <p>A module encapsulating different triplestores using the strategy
design pattern.</p>
<p>For a list over available backends, see
https://emmc-asbl.github.io/tripper/latest/#available-backends</p>
<p>This module has no dependencies outside the standard library, but
the triplestore backends may have.</p>
<p>For developers: The usage of <code>s</code>, <code>p</code>, and <code>o</code> represent the different
parts of an RDF Triple: subject, predicate, and object.</p>



  <div class="doc doc-children">














  <div class="doc doc-object doc-class">



<h2 id="tripper.triplestore.Triplestore" class="doc doc-heading">
        <code>
Triplestore        </code>



<a href="#tripper.triplestore.Triplestore" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Provides a common frontend to a range of triplestore backends.</p>

        <details class="quote">
          <summary>Source code in <code>tripper/triplestore.py</code></summary>
          <div class="language-python highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Triplestore</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Provides a common frontend to a range of triplestore backends.&quot;&quot;&quot;</span>

    <span class="c1"># pylint: disable=too-many-instance-attributes</span>

    <span class="n">default_namespaces</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;xml&quot;</span><span class="p">:</span> <span class="n">XML</span><span class="p">,</span>
        <span class="s2">&quot;rdf&quot;</span><span class="p">:</span> <span class="n">RDF</span><span class="p">,</span>
        <span class="s2">&quot;rdfs&quot;</span><span class="p">:</span> <span class="n">RDFS</span><span class="p">,</span>
        <span class="s2">&quot;xsd&quot;</span><span class="p">:</span> <span class="n">XSD</span><span class="p">,</span>
        <span class="s2">&quot;owl&quot;</span><span class="p">:</span> <span class="n">OWL</span><span class="p">,</span>
        <span class="c1"># &quot;skos&quot;: SKOS,</span>
        <span class="c1"># &quot;dcat&quot;: DCAT,</span>
        <span class="c1"># &quot;dc&quot;: DC,</span>
        <span class="c1"># &quot;dcterms&quot;: DCTERMS,</span>
        <span class="c1"># &quot;foaf&quot;: FOAF,</span>
        <span class="c1"># &quot;doap&quot;: DOAP,</span>
        <span class="c1"># &quot;map&quot;: MAP,</span>
        <span class="c1"># &quot;dm&quot;: DM,</span>
    <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">backend</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">base_iri</span><span class="p">:</span> <span class="s2">&quot;Optional[str]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">database</span><span class="p">:</span> <span class="s2">&quot;Optional[str]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">package</span><span class="p">:</span> <span class="s2">&quot;Optional[str]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">check_url</span><span class="p">:</span> <span class="s2">&quot;Optional[str]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialise triplestore using the backend with the given name.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            backend: Name of the backend module.</span>

<span class="sd">                For built-in backends or backends provided via a</span>
<span class="sd">                backend package (using entrypoints), this should just</span>
<span class="sd">                be the name of the backend with no dots (ex: &quot;rdflib&quot;).</span>

<span class="sd">                For a custom backend, you can provide the full module name,</span>
<span class="sd">                including the dots (ex:&quot;mypackage.mybackend&quot;).  If `package`</span>
<span class="sd">                is given, `backend` is interpreted relative to `package`</span>
<span class="sd">                (ex: ..mybackend).</span>

<span class="sd">                For a list over available backends, see</span>
<span class="sd">                https://github.com/EMMC-ASBL/tripper#available-backends</span>

<span class="sd">            base_iri: Base IRI used by the add_function() method when adding</span>
<span class="sd">                new triples. May also be used by the backend.</span>
<span class="sd">            database: Name of database to connect to (for backends that</span>
<span class="sd">                supports it).</span>
<span class="sd">            package: Required when `backend` is a relative module.  In that</span>
<span class="sd">                case, it is relative to `package`.</span>
<span class="sd">            check_url: A URL to use for checking that the backend is available.</span>
<span class="sd">                Defaults to `base_iri`.</span>
<span class="sd">            kwargs: Keyword arguments passed to the backend&#39;s __init__()</span>
<span class="sd">                method.</span>

<span class="sd">        Attributes:</span>
<span class="sd">            backend_name: Name of backend.</span>
<span class="sd">            base_iri: Assigned to the `base_iri` argument.</span>
<span class="sd">            closed: Whether the triplestore is closed.</span>
<span class="sd">            kwargs: Dict with additional keyword arguments.</span>
<span class="sd">            namespaces: Dict mapping namespace prefixes to IRIs.</span>
<span class="sd">            package: Name of Python package if the backend is implemented as</span>
<span class="sd">                a relative module. Assigned to the `package` argument.</span>
<span class="sd">            check_url: The value of the `check_url` argument.</span>

<span class="sd">        Notes:</span>
<span class="sd">            If the backend establishes a connection that should be closed</span>
<span class="sd">            it is useful to instantiate the Triplestore as a context manager:</span>

<span class="sd">                &gt;&gt;&gt; import tripper</span>
<span class="sd">                &gt;&gt;&gt; with tripper.Triplestore(&quot;rdflib&quot;) as ts:</span>
<span class="sd">                ...     print(ts.backend_name)</span>
<span class="sd">                rdflib</span>

<span class="sd">            This ensures that the connection is automatically closed when the</span>
<span class="sd">            context manager exits.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">backend_name</span> <span class="o">=</span> <span class="n">backend</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">module</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_backend</span><span class="p">(</span><span class="n">backend</span><span class="p">,</span> <span class="n">package</span><span class="p">)</span>
        <span class="bp">cls</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">backend_name</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="si">}</span><span class="s2">Strategy&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">base_iri</span> <span class="o">=</span> <span class="n">base_iri</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">namespaces</span><span class="p">:</span> <span class="s2">&quot;Dict[str, Namespace]&quot;</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">closed</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">backend_name</span> <span class="o">=</span> <span class="n">backend_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">database</span> <span class="o">=</span> <span class="n">database</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">package</span> <span class="o">=</span> <span class="n">package</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_url</span> <span class="o">=</span> <span class="n">check_url</span> <span class="k">if</span> <span class="n">check_url</span> <span class="k">else</span> <span class="n">base_iri</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">backend</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">base_iri</span><span class="o">=</span><span class="n">base_iri</span><span class="p">,</span> <span class="n">database</span><span class="o">=</span><span class="n">database</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="c1"># Cache functions in the triplestore for fast access</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">function_repo</span><span class="p">:</span> <span class="s2">&quot;Dict[str, Union[float, Callable, None]]&quot;</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">namespace</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_namespaces</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="n">namespace</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">exc</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_load_backend</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">backend</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">package</span><span class="p">:</span> <span class="s2">&quot;Optional[str]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load and return backend module.  The arguments has the same meaning</span>
<span class="sd">        as corresponding arguments to __init__().</span>

<span class="sd">        If `backend` contains a dot or `package` is given, import `backend`</span>
<span class="sd">        using `package` for relative imports.</span>

<span class="sd">        Otherwise, if there in the &quot;tripper.backends&quot; entry point group exists</span>
<span class="sd">        an entry point who&#39;s name matches `backend`, then the corresponding</span>
<span class="sd">        module is loaded.</span>

<span class="sd">        Otherwise, look for the `backend` in any of the (sub)packages listed</span>
<span class="sd">        `backend_packages` module variable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Explicitly specified backend</span>
        <span class="k">if</span> <span class="s2">&quot;.&quot;</span> <span class="ow">in</span> <span class="n">backend</span> <span class="ow">or</span> <span class="n">package</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="n">backend</span><span class="p">,</span> <span class="n">package</span><span class="p">)</span>

        <span class="c1"># Installed backend package</span>
        <span class="k">for</span> <span class="n">entry_point</span> <span class="ow">in</span> <span class="n">get_entry_points</span><span class="p">(</span><span class="s2">&quot;tripper.backends&quot;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">entry_point</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">backend</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="n">entry_point</span><span class="o">.</span><span class="n">module</span><span class="p">)</span>

        <span class="c1"># Backend module</span>
        <span class="k">for</span> <span class="n">pack</span> <span class="ow">in</span> <span class="n">backend_packages</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">pack</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">backend</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ModuleNotFoundError</span><span class="p">:</span>
                <span class="k">pass</span>

        <span class="k">raise</span> <span class="ne">ModuleNotFoundError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;No tripper backend named &#39;</span><span class="si">{</span><span class="n">backend</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">backend</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="c1"># Methods implemented by backend</span>
    <span class="c1"># ------------------------------</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">triples</span><span class="p">(</span>  <span class="c1"># pylint: disable=redefined-builtin</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">subject</span><span class="p">:</span> <span class="s2">&quot;Optional[Union[str, Triple]]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">predicate</span><span class="p">:</span> <span class="s2">&quot;Optional[str]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="nb">object</span><span class="p">:</span> <span class="s2">&quot;Optional[Union[str, Literal]]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">triple</span><span class="p">:</span> <span class="s2">&quot;Optional[Triple]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Generator[Triple, None, None]&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a generator over matching triples.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            subject: If given, match triples with this subject.</span>
<span class="sd">            predicate: If given, match triples with this predicate.</span>
<span class="sd">            object: If given, match triples with this object.</span>
<span class="sd">            triple: Deprecated. A `(s, p, o)` tuple where `s`, `p` and `o`</span>
<span class="sd">                should either be None (matching anything) or an exact IRI</span>
<span class="sd">                to match.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Generator over all matching triples.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># __TODO__: Remove these lines when deprecated</span>
        <span class="k">if</span> <span class="n">triple</span> <span class="ow">or</span> <span class="p">(</span><span class="n">subject</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="nb">str</span><span class="p">)):</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s2">&quot;The `triple` argument is deprecated.  Use `subject`, &quot;</span>
                <span class="s2">&quot;`predicate` and `object` arguments instead.&quot;</span><span class="p">,</span>
                <span class="ne">DeprecationWarning</span><span class="p">,</span>
                <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="n">subject</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">subject</span><span class="p">,</span> <span class="n">predicate</span><span class="p">,</span> <span class="nb">object</span> <span class="o">=</span> <span class="n">subject</span>
        <span class="k">elif</span> <span class="n">triple</span><span class="p">:</span>
            <span class="n">subject</span><span class="p">,</span> <span class="n">predicate</span><span class="p">,</span> <span class="nb">object</span> <span class="o">=</span> <span class="n">triple</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="n">subject</span><span class="p">,</span> <span class="n">predicate</span><span class="p">,</span> <span class="nb">object</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_triples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">triples</span><span class="p">:</span> <span class="s2">&quot;Iterable[Triple]&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a sequence of triples.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            triples: A sequence of `(s, p, o)` tuples to add to the</span>
<span class="sd">                triplestore.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">add_triples</span><span class="p">(</span><span class="n">triples</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">remove</span><span class="p">(</span>  <span class="c1"># pylint: disable=redefined-builtin</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">subject</span><span class="p">:</span> <span class="s2">&quot;Optional[Union[str, Triple]]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">predicate</span><span class="p">:</span> <span class="s2">&quot;Optional[str]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="nb">object</span><span class="p">:</span> <span class="s2">&quot;Optional[Union[str, Literal]]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">triple</span><span class="p">:</span> <span class="s2">&quot;Optional[Triple]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove all matching triples from the backend.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            subject: If given, match triples with this subject.</span>
<span class="sd">                For backward compatibility `subject` may also be an</span>
<span class="sd">                `(s, p, o)` triple.</span>
<span class="sd">            predicate: If given, match triples with this predicate.</span>
<span class="sd">            object: If given, match triples with this object.</span>
<span class="sd">            triple: Deprecated. A `(s, p, o)` tuple where `s`, `p` and `o`</span>
<span class="sd">                should either be None (matching anything) or an exact IRI</span>
<span class="sd">                to match.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># __TODO__: Remove these lines when deprecated</span>
        <span class="k">if</span> <span class="n">triple</span> <span class="ow">or</span> <span class="p">(</span><span class="n">subject</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="nb">str</span><span class="p">)):</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s2">&quot;The `triple` argument is deprecated.  Use `subject`, &quot;</span>
                <span class="s2">&quot;`predicate` and `object` arguments instead.&quot;</span><span class="p">,</span>
                <span class="ne">DeprecationWarning</span><span class="p">,</span>
                <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="n">subject</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">subject</span><span class="p">,</span> <span class="n">predicate</span><span class="p">,</span> <span class="nb">object</span> <span class="o">=</span> <span class="n">subject</span>
        <span class="k">elif</span> <span class="n">triple</span><span class="p">:</span>
            <span class="n">subject</span><span class="p">,</span> <span class="n">predicate</span><span class="p">,</span> <span class="nb">object</span> <span class="o">=</span> <span class="n">triple</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">remove</span><span class="p">((</span><span class="n">subject</span><span class="p">,</span> <span class="n">predicate</span><span class="p">,</span> <span class="nb">object</span><span class="p">))</span>

    <span class="c1"># Methods optionally implemented by backend</span>
    <span class="c1"># -----------------------------------------</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calls the backend close() method if it is implemented.</span>
<span class="sd">        Otherwise, this method has no effect.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># It should be ok to call close() regardless of whether the backend</span>
        <span class="c1"># implements this method or not.  Hence, don&#39;t call _check_method().</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">closed</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="p">,</span> <span class="s2">&quot;close&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">closed</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">parse</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">source</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="nb">format</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">fallback_backend</span><span class="o">=</span><span class="s2">&quot;rdflib&quot;</span><span class="p">,</span>
        <span class="n">fallback_backend_kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>  <span class="c1"># pylint: disable=redefined-builtin</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Parse source and add the resulting triples to triplestore.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            source: File-like object. File name or URL.</span>
<span class="sd">            format: Needed if format can not be inferred from source.</span>
<span class="sd">            fallback_backend: If the current backend doesn&#39;t implement</span>
<span class="sd">                parse, use the `fallback_backend` instead.</span>
<span class="sd">            fallback_backend_kwargs: Dict with additional keyword arguments</span>
<span class="sd">                for initialising `fallback_backend`.</span>
<span class="sd">            kwargs: Keyword arguments passed to the backend.</span>
<span class="sd">                The rdflib backend supports e.g. `location` (absolute</span>
<span class="sd">                or relative URL) and `data` (string containing the</span>
<span class="sd">                data to be parsed) arguments.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="p">,</span> <span class="s2">&quot;parse&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_check_method</span><span class="p">(</span><span class="s2">&quot;parse&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">fallback_backend_kwargs</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">fallback_backend_kwargs</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">ts</span> <span class="o">=</span> <span class="n">Triplestore</span><span class="p">(</span>
                <span class="n">backend</span><span class="o">=</span><span class="n">fallback_backend</span><span class="p">,</span> <span class="o">**</span><span class="n">fallback_backend_kwargs</span>
            <span class="p">)</span>
            <span class="n">ts</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_triples</span><span class="p">(</span><span class="n">ts</span><span class="o">.</span><span class="n">triples</span><span class="p">())</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="p">,</span> <span class="s2">&quot;namespaces&quot;</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">namespace</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">namespaces</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">prefix</span> <span class="ow">and</span> <span class="n">prefix</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">namespaces</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">namespaces</span><span class="p">[</span><span class="n">prefix</span><span class="p">]</span> <span class="o">=</span> <span class="n">Namespace</span><span class="p">(</span><span class="n">namespace</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">serialize</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">destination</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;turtle&quot;</span><span class="p">,</span>  <span class="c1"># pylint: disable=redefined-builtin</span>
        <span class="n">fallback_backend</span><span class="o">=</span><span class="s2">&quot;rdflib&quot;</span><span class="p">,</span>
        <span class="n">fallback_backend_kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Union[None, str]&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Serialise triplestore.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            destination: File name or object to write to.  If None, the</span>
<span class="sd">                serialisation is returned.</span>
<span class="sd">            format: Format to serialise as.  Supported formats, depends on</span>
<span class="sd">                the backend.</span>
<span class="sd">            fallback_backend: If the current backend doesn&#39;t implement</span>
<span class="sd">                serialisation, use the `fallback_backend` instead.</span>
<span class="sd">            fallback_backend_kwargs: Dict with additional keyword arguments</span>
<span class="sd">                for initialising `fallback_backend`.</span>
<span class="sd">            kwargs: Passed to the backend serialize() method.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Serialized string if `destination` is None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="p">,</span> <span class="s2">&quot;parse&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_check_method</span><span class="p">(</span><span class="s2">&quot;serialize&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span>
                <span class="n">destination</span><span class="o">=</span><span class="n">destination</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">fallback_backend_kwargs</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">fallback_backend_kwargs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">ts</span> <span class="o">=</span> <span class="n">Triplestore</span><span class="p">(</span><span class="n">backend</span><span class="o">=</span><span class="n">fallback_backend</span><span class="p">,</span> <span class="o">**</span><span class="n">fallback_backend_kwargs</span><span class="p">)</span>
        <span class="n">ts</span><span class="o">.</span><span class="n">add_triples</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">triples</span><span class="p">())</span>
        <span class="k">for</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">iri</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">namespaces</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">ts</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="n">iri</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ts</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">destination</span><span class="o">=</span><span class="n">destination</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">query</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">iris</span><span class="p">:</span> <span class="s2">&quot;Optional[dict]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">literals</span><span class="p">:</span> <span class="s2">&quot;Optional[dict]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Any&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;SPARQL query.</span>

<span class="sd">        The `query` argument may contain variables for IRIs and literals,</span>
<span class="sd">        to be substituted using the `iris` and `literals` arguments. These</span>
<span class="sd">        variables are prefixed `$`. This makes them easy to distinguish from</span>
<span class="sd">        query variables, that are typically prefixed with `?`.</span>

<span class="sd">        The query substitutions may be useful when the query is constructed</span>
<span class="sd">        from user input, since they are properly escaped and will be inserted</span>
<span class="sd">        in the query as a single token.  This may prevent sparql injection</span>
<span class="sd">        attacks.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            query: String with the SPARQL query.</span>
<span class="sd">            iris: Dict used for query substitutions that maps IRI variables</span>
<span class="sd">                to IRIs. The IRIs may be provided as fully expanded or</span>
<span class="sd">                prefixed with a prefix registered in the triplestore namespace.</span>
<span class="sd">            literals: Dict used for query substitutions that maps literal</span>
<span class="sd">                variables to literals.</span>
<span class="sd">            kwargs: Keyword arguments passed to the backend query() method.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The return type depends on type of query:</span>
<span class="sd">              - SELECT: list of tuples of IRIs for each matching row</span>
<span class="sd">              - ASK: bool</span>
<span class="sd">              - CONSTRUCT, DESCRIBE: generator over triples</span>

<span class="sd">        Note:</span>
<span class="sd">            This method is intended for SELECT, ASK, CONSTRUCT and</span>
<span class="sd">            DESCRIBE queries.  Use the update() method for INSERT and</span>
<span class="sd">            DELETE queries.</span>

<span class="sd">            Not all backends may support all types of queries.</span>

<span class="sd">        Examples:</span>
<span class="sd">            Query for everyone with the name &quot;John Dow&quot;:</span>

<span class="sd">            &gt;&gt;&gt; from tripper import FOAF, Literal, Triplestore</span>
<span class="sd">            &gt;&gt;&gt; ts = Triplestore(backend=&quot;rdflib&quot;)</span>
<span class="sd">            &gt;&gt;&gt; ts.bind(&quot;foaf&quot;, FOAF)</span>
<span class="sd">            Namespace(&#39;http://xmlns.com/foaf/0.1/&#39;)</span>

<span class="sd">            &gt;&gt;&gt; ts.add_triples([</span>
<span class="sd">            ...     (&quot;:john&quot;, FOAF.name, Literal(&quot;John Dow&quot;)),</span>
<span class="sd">            ...     (&quot;:jack&quot;, FOAF.name, Literal(&quot;Jack Hudson&quot;)),</span>
<span class="sd">            ... ])</span>
<span class="sd">            &gt;&gt;&gt; ts.query(</span>
<span class="sd">            ...     &quot;SELECT ?s WHERE { ?s $name $obj .}&quot;,</span>
<span class="sd">            ...     iris={&quot;name&quot;: &quot;foaf:name&quot;},</span>
<span class="sd">            ...     literals={&quot;obj&quot;: &quot;John Dow&quot;},</span>
<span class="sd">            ... )</span>
<span class="sd">            [(&#39;:john&#39;,)]</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_method</span><span class="p">(</span><span class="s2">&quot;query&quot;</span><span class="p">)</span>
        <span class="n">new_query</span> <span class="o">=</span> <span class="n">substitute_query</span><span class="p">(</span>
            <span class="n">query</span><span class="p">,</span> <span class="n">iris</span><span class="o">=</span><span class="n">iris</span><span class="p">,</span> <span class="n">literals</span><span class="o">=</span><span class="n">literals</span><span class="p">,</span> <span class="n">prefixes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">namespaces</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">new_query</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">iris</span><span class="p">:</span> <span class="s2">&quot;Optional[dict]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">literals</span><span class="p">:</span> <span class="s2">&quot;Optional[dict]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update triplestore with SPARQL.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            query: String with the SPARQL query.</span>
<span class="sd">            iris: Dict used for query substitutions that maps IRI variables</span>
<span class="sd">                to IRIs. The IRIs may be provided as fully expanded or</span>
<span class="sd">                prefixed with a prefix registered in the triplestore namespace.</span>
<span class="sd">            literals: Dict used for query substitutions that maps literal</span>
<span class="sd">                variables to literals.</span>
<span class="sd">            kwargs: Keyword arguments passed to the backend update() method.</span>

<span class="sd">        Note:</span>
<span class="sd">            See `query()` for how to the query substitution arguments `iris`</span>
<span class="sd">            and `literals`.</span>

<span class="sd">            This method is intended for INSERT and DELETE queries. Use</span>
<span class="sd">            the query() method for SELECT, ASK, CONSTRUCT and DESCRIBE queries.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_method</span><span class="p">(</span><span class="s2">&quot;update&quot;</span><span class="p">)</span>
        <span class="n">new_query</span> <span class="o">=</span> <span class="n">substitute_query</span><span class="p">(</span>
            <span class="n">query</span><span class="p">,</span> <span class="n">iris</span><span class="o">=</span><span class="n">iris</span><span class="p">,</span> <span class="n">literals</span><span class="o">=</span><span class="n">literals</span><span class="p">,</span> <span class="n">prefixes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">namespaces</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">new_query</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@overload</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">bind</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">namespace</span><span class="p">:</span> <span class="s2">&quot;Union[str, Namespace, Triplestore]&quot;</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Namespace&quot;</span><span class="p">:</span> <span class="o">...</span>

    <span class="nd">@overload</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">bind</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">namespace</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span> <span class="o">...</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">bind</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">namespace</span><span class="p">:</span> <span class="s2">&quot;Union[str, Namespace, Triplestore, None]&quot;</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Union[Namespace, None]&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Bind prefix to namespace and return the new Namespace object.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            prefix: Prefix to bind the the namespace.</span>
<span class="sd">            namespace: Namespace to bind to.  The default is to bind to the</span>
<span class="sd">                `base_iri` of the current triplestore.</span>
<span class="sd">                If `namespace` is None, the corresponding prefix is removed.</span>
<span class="sd">            kwargs: Keyword arguments are passed to the Namespace()</span>
<span class="sd">                constructor.</span>

<span class="sd">        Returns:</span>
<span class="sd">            New Namespace object or None if namespace is removed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">namespace</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="n">namespace</span> <span class="o">=</span> <span class="bp">self</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">namespace</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">ns</span> <span class="o">=</span> <span class="n">Namespace</span><span class="p">(</span><span class="n">namespace</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">namespace</span><span class="p">,</span> <span class="n">Triplestore</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">namespace</span><span class="o">.</span><span class="n">base_iri</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;triplestore object </span><span class="si">{</span><span class="n">namespace</span><span class="si">}</span><span class="s2"> has no `base_iri`&quot;</span>
                <span class="p">)</span>
            <span class="n">ns</span> <span class="o">=</span> <span class="n">Namespace</span><span class="p">(</span><span class="n">namespace</span><span class="o">.</span><span class="n">base_iri</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">namespace</span><span class="p">,</span> <span class="n">Namespace</span><span class="p">):</span>
            <span class="c1"># pylint: disable=protected-access</span>
            <span class="n">ns</span> <span class="o">=</span> <span class="n">Namespace</span><span class="p">(</span><span class="n">namespace</span><span class="o">.</span><span class="n">_iri</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">namespace</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">namespaces</span><span class="p">[</span><span class="n">prefix</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="p">,</span> <span class="s2">&quot;bind&quot;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;invalid `namespace` type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">namespace</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="p">,</span> <span class="s2">&quot;bind&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span>
                <span class="n">prefix</span><span class="p">,</span> <span class="n">ns</span><span class="o">.</span><span class="n">_iri</span>  <span class="c1"># pylint: disable=protected-access</span>
            <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">namespaces</span><span class="p">[</span><span class="n">prefix</span><span class="p">]</span> <span class="o">=</span> <span class="n">ns</span>
        <span class="k">return</span> <span class="n">ns</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_database</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">backend</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">database</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new database in backend.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            backend: Name of backend.</span>
<span class="sd">            database: Name of the new database.</span>
<span class="sd">            kwargs: Keyword arguments passed to the backend</span>
<span class="sd">                create_database() method.</span>

<span class="sd">        Note:</span>
<span class="sd">            This is a class method, which operates on the backend</span>
<span class="sd">            triplestore without connecting to it.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_check_backend_method</span><span class="p">(</span><span class="n">backend</span><span class="p">,</span> <span class="s2">&quot;create_database&quot;</span><span class="p">)</span>
        <span class="n">backend_class</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_get_backend</span><span class="p">(</span><span class="n">backend</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">backend_class</span><span class="o">.</span><span class="n">create_database</span><span class="p">(</span><span class="n">database</span><span class="o">=</span><span class="n">database</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">remove_database</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">backend</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">database</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove a database in backend.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            backend: Name of backend.</span>
<span class="sd">            database: Name of the database to be removed.</span>
<span class="sd">            kwargs: Keyword arguments passed to the backend</span>
<span class="sd">                remove_database() method.</span>

<span class="sd">        Note:</span>
<span class="sd">            This is a class method, which operates on the backend</span>
<span class="sd">            triplestore without connecting to it.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_check_backend_method</span><span class="p">(</span><span class="n">backend</span><span class="p">,</span> <span class="s2">&quot;remove_database&quot;</span><span class="p">)</span>
        <span class="n">backend_class</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_get_backend</span><span class="p">(</span><span class="n">backend</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">backend_class</span><span class="o">.</span><span class="n">remove_database</span><span class="p">(</span><span class="n">database</span><span class="o">=</span><span class="n">database</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">list_databases</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">backend</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;For backends that supports multiple databases, list of all</span>
<span class="sd">        databases.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            backend: Name of backend.</span>
<span class="sd">            kwargs: Keyword arguments passed to the backend</span>
<span class="sd">                list_databases() method.</span>

<span class="sd">        Note:</span>
<span class="sd">            This is a class method, which operates on the backend</span>
<span class="sd">            triplestore without connecting to it.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_check_backend_method</span><span class="p">(</span><span class="n">backend</span><span class="p">,</span> <span class="s2">&quot;list_databases&quot;</span><span class="p">)</span>
        <span class="n">backend_class</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_get_backend</span><span class="p">(</span><span class="n">backend</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">backend_class</span><span class="o">.</span><span class="n">list_databases</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="c1"># Convenient methods</span>
    <span class="c1"># ------------------</span>
    <span class="c1"># These methods are modelled after rdflib and provide some convinient</span>
    <span class="c1"># interfaces to the triples(), add_triples() and remove() methods</span>
    <span class="c1"># implemented by all backends.</span>

    <span class="n">prefer_sparql</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span>
        <span class="n">fget</span><span class="o">=</span><span class="k">lambda</span> <span class="bp">self</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="p">,</span> <span class="s2">&quot;prefer_sparql&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
        <span class="n">doc</span><span class="o">=</span><span class="p">(</span>
            <span class="s2">&quot;Whether the backend prefer SPARQL over the triples() interface. &quot;</span>
            <span class="s2">&quot;Is None if not specified by the backend.&quot;</span>
            <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;Even though Tripper requires that the Triplestore.triples() is &quot;</span>
            <span class="s2">&quot;implemented, Triplestore.query() must be used for some &quot;</span>
            <span class="s2">&quot;backends in specific cases (like fuseki when working on RDF &quot;</span>
            <span class="s2">&quot;lists) because of how blank nodes are treated. &quot;</span>
            <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;The purpose of this property is to let tripper &quot;</span>
            <span class="s2">&quot;automatically select the most appropriate interface depending &quot;</span>
            <span class="s2">&quot;on the current backend settings.&quot;</span>
        <span class="p">),</span>
    <span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_check_backend_method</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">backend</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Checks that `backend` has a method called `name`.</span>

<span class="sd">        Raises NotImplementedError if it hasn&#39;t.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">backend_class</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_get_backend</span><span class="p">(</span><span class="n">backend</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">backend_class</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Triplestore backend </span><span class="si">{</span><span class="n">backend</span><span class="si">!r}</span><span class="s2"> do not implement a &quot;</span>
                <span class="sa">f</span><span class="s1">&#39;&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1">()&quot; method.&#39;</span>
            <span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_get_backend</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">backend</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">package</span><span class="p">:</span> <span class="s2">&quot;Optional[str]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the class implementing the given backend.&quot;&quot;&quot;</span>
        <span class="n">module</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_load_backend</span><span class="p">(</span><span class="n">backend</span><span class="p">,</span> <span class="n">package</span><span class="o">=</span><span class="n">package</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">backend</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="si">}</span><span class="s2">Strategy&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_check_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that backend implements the given method.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_backend_method</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">backend_name</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">triple</span><span class="p">:</span> <span class="s2">&quot;Triple&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add `triple` to triplestore.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_triples</span><span class="p">([</span><span class="n">triple</span><span class="p">])</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">value</span><span class="p">(</span>  <span class="c1"># pylint: disable=redefined-builtin</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">subject</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">predicate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="nb">object</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="nb">any</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">lang</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Union[str, Literal]&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the value for a pair of two criteria.</span>

<span class="sd">        Useful if one knows that there may only be one value.</span>
<span class="sd">        Two of `subject`, `predicate` or `object` must be provided.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            subject: Possible criteria to match.</span>
<span class="sd">            predicate: Possible criteria to match.</span>
<span class="sd">            object: Possible criteria to match.</span>
<span class="sd">            default: Value to return if no matches are found.</span>
<span class="sd">            any: Used to define how many values to return. Can be set to:</span>
<span class="sd">                `False` (default): return the value or raise UniquenessError</span>
<span class="sd">                if there is more than one matching value.</span>
<span class="sd">                `True`: return any matching value if there is more than one.</span>
<span class="sd">                `None`: return a generator over all matching values.</span>
<span class="sd">            lang: If provided, require that the value must be a localised</span>
<span class="sd">                literal with the given language code.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The value of the `subject`, `predicate` or `object` that is</span>
<span class="sd">            None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">spo</span> <span class="o">=</span> <span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="n">predicate</span><span class="p">,</span> <span class="nb">object</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">sum</span><span class="p">(</span><span class="n">iri</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">iri</span> <span class="ow">in</span> <span class="n">spo</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Exactly one of `subject`, `predicate` or `object` must be &quot;</span>
                <span class="s2">&quot;None.&quot;</span>
            <span class="p">)</span>

        <span class="c1"># Index of subject-predicate-object argument that is None</span>
        <span class="p">(</span><span class="n">idx</span><span class="p">,)</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">spo</span><span class="p">)</span> <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">]</span>

        <span class="n">triples</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">triples</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="n">predicate</span><span class="p">,</span> <span class="nb">object</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">lang</span><span class="p">:</span>
            <span class="n">triples</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">t</span>
                <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">triples</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="n">idx</span><span class="p">],</span> <span class="n">Literal</span><span class="p">)</span>
                <span class="ow">and</span> <span class="n">t</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">lang</span> <span class="o">==</span> <span class="n">lang</span>  <span class="c1"># type: ignore</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="nb">any</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">triples</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">triples</span><span class="p">)[</span><span class="n">idx</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">default</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="nb">next</span><span class="p">(</span><span class="n">triples</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">value</span>

        <span class="k">if</span> <span class="nb">any</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">value</span>
        <span class="k">raise</span> <span class="n">UniquenessError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;More than one match: </span><span class="si">{</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span><span class="w"> </span><span class="n">predicate</span><span class="p">,</span><span class="w"> </span><span class="nb">object</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">objects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a generator of objects for given subject and predicate.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">triples</span><span class="p">(</span><span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="n">predicate</span><span class="p">):</span>
            <span class="k">yield</span> <span class="n">o</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">predicates</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">object</span><span class="o">=</span><span class="kc">None</span>  <span class="c1"># pylint: disable=redefined-builtin</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a generator of predicates for given subject and object.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">triples</span><span class="p">(</span><span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span> <span class="nb">object</span><span class="o">=</span><span class="nb">object</span><span class="p">):</span>
            <span class="k">yield</span> <span class="n">p</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">subjects</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">object</span><span class="o">=</span><span class="kc">None</span>  <span class="c1"># pylint: disable=redefined-builtin</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a generator of subjects for given predicate and object.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">triples</span><span class="p">(</span><span class="n">predicate</span><span class="o">=</span><span class="n">predicate</span><span class="p">,</span> <span class="nb">object</span><span class="o">=</span><span class="nb">object</span><span class="p">):</span>
            <span class="k">yield</span> <span class="n">s</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">predicate_objects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a generator of (predicate, object) tuples for given</span>
<span class="sd">        subject.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">triples</span><span class="p">(</span><span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">):</span>
            <span class="k">yield</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">subject_objects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a generator of (subject, object) tuples for given</span>
<span class="sd">        predicate.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">triples</span><span class="p">(</span><span class="n">predicate</span><span class="o">=</span><span class="n">predicate</span><span class="p">):</span>
            <span class="k">yield</span> <span class="n">s</span><span class="p">,</span> <span class="n">o</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">subject_predicates</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">):</span>  <span class="c1"># pylint: disable=redefined-builtin</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a generator of (subject, predicate) tuples for given</span>
<span class="sd">        object.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">triples</span><span class="p">(</span><span class="nb">object</span><span class="o">=</span><span class="nb">object</span><span class="p">):</span>
            <span class="k">yield</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">has</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">object</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">):</span>  <span class="c1"># pylint: disable=redefined-builtin</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns true if the triplestore has any triple matching</span>
<span class="sd">        the give subject, predicate and/or object.&quot;&quot;&quot;</span>
        <span class="n">triple</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">triples</span><span class="p">(</span>
            <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="n">predicate</span><span class="p">,</span> <span class="nb">object</span><span class="o">=</span><span class="nb">object</span>
        <span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">next</span><span class="p">(</span><span class="n">triple</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">triple</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convenience method to update the value of object.</span>

<span class="sd">        Removes any existing triples for subject and predicate before adding</span>
<span class="sd">        the given `triple`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">triple</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">triple</span><span class="p">)</span>

    <span class="c1"># Methods providing additional functionality</span>
    <span class="c1"># ------------------------------------------</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">expand_iri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iri</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">strict</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the full IRI if `iri` is prefixed.</span>
<span class="sd">        Otherwise `iri` isreturned.</span>

<span class="sd">        Examples:</span>

<span class="sd">        ```python</span>
<span class="sd">        &gt;&gt;&gt; from tripper import Triplestore</span>
<span class="sd">        &gt;&gt;&gt; ts = Triplestore(backend=&quot;rdflib&quot;)</span>

<span class="sd">        # Unknown prefix raises an exception</span>
<span class="sd">        &gt;&gt;&gt; ts.expand_iri(&quot;ex:Concept&quot;, strict=True)  # doctest: +ELLIPSIS</span>
<span class="sd">        Traceback (most recent call last):</span>
<span class="sd">        ...</span>
<span class="sd">        tripper.errors.NamespaceError: Undefined prefix &quot;ex&quot; in IRI: ex:Concept</span>

<span class="sd">        &gt;&gt;&gt; EX = ts.bind(&quot;ex&quot;, &quot;http://example.com#&quot;)</span>
<span class="sd">        &gt;&gt;&gt; ts.expand_iri(&quot;ex:Concept&quot;)</span>
<span class="sd">        &#39;http://example.com#Concept&#39;</span>

<span class="sd">        # Returns iri if it has no prefix</span>
<span class="sd">        &gt;&gt;&gt; ts.expand_iri(&quot;http://example.com#Concept&quot;)</span>
<span class="sd">        &#39;http://example.com#Concept&#39;</span>

<span class="sd">        ```</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">expand_iri</span><span class="p">(</span><span class="n">iri</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">namespaces</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="n">strict</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">prefix_iri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iri</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">require_prefixed</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
        <span class="c1"># pylint: disable=line-too-long</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return prefixed IRI.</span>

<span class="sd">        This is the reverse of expand_iri().</span>

<span class="sd">        If `require_prefixed` is true, a NamespaceError exception is raised</span>
<span class="sd">        if no prefix can be found.</span>

<span class="sd">        Examples:</span>

<span class="sd">        ```python</span>
<span class="sd">        &gt;&gt;&gt; from tripper import Triplestore</span>
<span class="sd">        &gt;&gt;&gt; ts = Triplestore(backend=&quot;rdflib&quot;)</span>
<span class="sd">        &gt;&gt;&gt; ts.prefix_iri(&quot;http://example.com#Concept&quot;)</span>
<span class="sd">        &#39;http://example.com#Concept&#39;</span>

<span class="sd">        &gt;&gt;&gt; ts.prefix_iri(</span>
<span class="sd">        ...     &quot;http://example.com#Concept&quot;, require_prefixed=True</span>
<span class="sd">        ... )  # doctest: +ELLIPSIS</span>
<span class="sd">        Traceback (most recent call last):</span>
<span class="sd">        ...</span>
<span class="sd">        tripper.errors.NamespaceError: No prefix defined for IRI: http://example.com#Concept</span>

<span class="sd">        &gt;&gt;&gt; EX = ts.bind(&quot;ex&quot;, &quot;http://example.com#&quot;)</span>
<span class="sd">        &gt;&gt;&gt; ts.prefix_iri(&quot;http://example.com#Concept&quot;)</span>
<span class="sd">        &#39;ex:Concept&#39;</span>

<span class="sd">        ```</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">prefix_iri</span><span class="p">(</span><span class="n">iri</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">namespaces</span><span class="p">,</span> <span class="n">require_prefixed</span><span class="p">)</span>

    <span class="c1"># Types of restrictions defined in OWL</span>
    <span class="n">_restriction_types</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;some&quot;</span><span class="p">:</span> <span class="p">(</span><span class="n">OWL</span><span class="o">.</span><span class="n">someValueFrom</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
        <span class="s2">&quot;only&quot;</span><span class="p">:</span> <span class="p">(</span><span class="n">OWL</span><span class="o">.</span><span class="n">allValueFrom</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
        <span class="s2">&quot;exactly&quot;</span><span class="p">:</span> <span class="p">(</span><span class="n">OWL</span><span class="o">.</span><span class="n">onClass</span><span class="p">,</span> <span class="n">OWL</span><span class="o">.</span><span class="n">qualifiedCardinality</span><span class="p">),</span>
        <span class="s2">&quot;min&quot;</span><span class="p">:</span> <span class="p">(</span><span class="n">OWL</span><span class="o">.</span><span class="n">onClass</span><span class="p">,</span> <span class="n">OWL</span><span class="o">.</span><span class="n">minQualifiedCardinality</span><span class="p">),</span>
        <span class="s2">&quot;max&quot;</span><span class="p">:</span> <span class="p">(</span><span class="n">OWL</span><span class="o">.</span><span class="n">onClass</span><span class="p">,</span> <span class="n">OWL</span><span class="o">.</span><span class="n">maxQualifiedCardinality</span><span class="p">),</span>
        <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="p">(</span><span class="n">OWL</span><span class="o">.</span><span class="n">hasValue</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
    <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_restriction</span><span class="p">(</span>  <span class="c1"># pylint: disable=redefined-builtin</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="bp">cls</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="nb">property</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">value</span><span class="p">:</span> <span class="s2">&quot;Union[str, Literal]&quot;</span><span class="p">,</span>
        <span class="nb">type</span><span class="p">:</span> <span class="s2">&quot;RestrictionType&quot;</span><span class="p">,</span>
        <span class="n">cardinality</span><span class="p">:</span> <span class="s2">&quot;Optional[int]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">hashlength</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a restriction to a class in the triplestore.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            cls: IRI of class to which the restriction applies.</span>
<span class="sd">            property: IRI of restriction property.</span>
<span class="sd">            value: The IRI or literal value of the restriction target.</span>
<span class="sd">            type: The type of the restriction.  Should be one of:</span>
<span class="sd">                - some: existential restriction (value is a class IRI)</span>
<span class="sd">                - only: universal restriction (value is a class IRI)</span>
<span class="sd">                - exactly: cardinality restriction (value is a class IRI)</span>
<span class="sd">                - min: minimum cardinality restriction (value is a class IRI)</span>
<span class="sd">                - max: maximum cardinality restriction (value is a class IRI)</span>
<span class="sd">                - value: Value restriction (value is an IRI of an individual</span>
<span class="sd">                  or a literal)</span>

<span class="sd">            cardinality: the cardinality value for cardinality restrictions.</span>
<span class="sd">            hashlength: Number of bytes in the hash part of the bnode IRI.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The IRI of the created blank node representing the restriction.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">iri</span> <span class="o">=</span> <span class="n">bnode_iri</span><span class="p">(</span>
            <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;restriction&quot;</span><span class="p">,</span>
            <span class="n">source</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">cls</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="nb">property</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">cardinality</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">length</span><span class="o">=</span><span class="n">hashlength</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">triples</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">RDFS</span><span class="o">.</span><span class="n">subClassOf</span><span class="p">,</span> <span class="n">iri</span><span class="p">),</span>
            <span class="p">(</span><span class="n">iri</span><span class="p">,</span> <span class="n">RDF</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">OWL</span><span class="o">.</span><span class="n">Restriction</span><span class="p">),</span>
            <span class="p">(</span><span class="n">iri</span><span class="p">,</span> <span class="n">OWL</span><span class="o">.</span><span class="n">onProperty</span><span class="p">,</span> <span class="nb">property</span><span class="p">),</span>
        <span class="p">]</span>
        <span class="k">if</span> <span class="nb">type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_restriction_types</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ArgumentValueError</span><span class="p">(</span>
                <span class="s1">&#39;`type` must be one of: &quot;some&quot;, &quot;only&quot;, &quot;exactly&quot;, &quot;min&quot;, &#39;</span>
                <span class="s1">&#39;&quot;max&quot; or &quot;value&quot;&#39;</span>
            <span class="p">)</span>
        <span class="n">pred</span><span class="p">,</span> <span class="n">card</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_restriction_types</span><span class="p">[</span><span class="nb">type</span><span class="p">]</span>
        <span class="n">triples</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">iri</span><span class="p">,</span> <span class="n">pred</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">card</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">cardinality</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ArgumentTypeError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;`cardinality` must be provided for type=&#39;</span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
                <span class="p">)</span>
            <span class="n">triples</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="p">(</span>
                    <span class="n">iri</span><span class="p">,</span>
                    <span class="n">card</span><span class="p">,</span>
                    <span class="n">Literal</span><span class="p">(</span><span class="n">cardinality</span><span class="p">,</span> <span class="n">datatype</span><span class="o">=</span><span class="n">XSD</span><span class="o">.</span><span class="n">nonNegativeInteger</span><span class="p">),</span>
                <span class="p">),</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_triples</span><span class="p">(</span><span class="n">triples</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">iri</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">restrictions</span><span class="p">(</span>  <span class="c1"># pylint: disable=redefined-builtin</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="bp">cls</span><span class="p">:</span> <span class="s2">&quot;Optional[str]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="nb">property</span><span class="p">:</span> <span class="s2">&quot;Optional[str]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">value</span><span class="p">:</span> <span class="s2">&quot;Optional[Union[str, Literal]]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="nb">type</span><span class="p">:</span> <span class="s2">&quot;Optional[RestrictionType]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">cardinality</span><span class="p">:</span> <span class="s2">&quot;Optional[int]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">asdict</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Generator[dict, None, None]&quot;</span><span class="p">:</span>
        <span class="c1"># pylint: disable=too-many-boolean-expressions</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a generator over matching restrictions.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            cls: IRI of class to which the restriction applies.</span>
<span class="sd">            property: IRI of restriction property.</span>
<span class="sd">            value: The IRI or literal value of the restriction target.</span>
<span class="sd">            type: The type of the restriction.  Should be one of:</span>
<span class="sd">                - some: existential restriction (value is a class IRI)</span>
<span class="sd">                - only: universal restriction (value is a class IRI)</span>
<span class="sd">                - exactly: cardinality restriction (value is a class IRI)</span>
<span class="sd">                - min: minimum cardinality restriction (value is a class IRI)</span>
<span class="sd">                - max: maximum cardinality restriction (value is a class IRI)</span>
<span class="sd">                - value: Value restriction (value is an IRI of an individual</span>
<span class="sd">                  or a literal)</span>

<span class="sd">            cardinality: the cardinality value for cardinality restrictions.</span>
<span class="sd">            asdict: Whether to returned generator is over dicts (see</span>
<span class="sd">                _get_restriction_dict()). Default is to return a generator</span>
<span class="sd">                over blank node IRIs.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A generator over matching restrictions.  See `asdict` argument</span>
<span class="sd">            for types iterated over.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">types</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_restriction_types</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="k">elif</span> <span class="nb">type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_restriction_types</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ArgumentValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid `type=&#39;</span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2">&#39;`, it must be one of: &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_restriction_types</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">types</span> <span class="o">=</span> <span class="p">{</span><span class="nb">type</span><span class="p">}</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">type</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="nb">set</span><span class="p">(</span><span class="nb">type</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Literal</span><span class="p">):</span>
            <span class="n">types</span><span class="o">.</span><span class="n">intersection_update</span><span class="p">({</span><span class="s2">&quot;value&quot;</span><span class="p">})</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">types</span><span class="o">.</span><span class="n">difference_update</span><span class="p">({</span><span class="s2">&quot;value&quot;</span><span class="p">})</span>

        <span class="k">if</span> <span class="n">cardinality</span><span class="p">:</span>
            <span class="n">types</span><span class="o">.</span><span class="n">intersection_update</span><span class="p">({</span><span class="s2">&quot;exactly&quot;</span><span class="p">,</span> <span class="s2">&quot;min&quot;</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">})</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">types</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ArgumentValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Inconsistent type=&#39;</span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2">&#39;, value=&#39;</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&#39; and &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;cardinality=&#39;</span><span class="si">{</span><span class="n">cardinality</span><span class="si">}</span><span class="s2">&#39; arguments&quot;</span>
            <span class="p">)</span>
        <span class="n">pred</span> <span class="o">=</span> <span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_restriction_types</span><span class="p">[</span><span class="n">t</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">types</span><span class="p">}</span>
        <span class="n">card</span> <span class="o">=</span> <span class="p">{</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_restriction_types</span><span class="p">[</span><span class="n">t</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">types</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_restriction_types</span><span class="p">[</span><span class="n">t</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">cardinality</span><span class="p">:</span>
            <span class="n">lcard</span> <span class="o">=</span> <span class="n">Literal</span><span class="p">(</span><span class="n">cardinality</span><span class="p">,</span> <span class="n">datatype</span><span class="o">=</span><span class="n">XSD</span><span class="o">.</span><span class="n">nonNegativeInteger</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">iri</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">subjects</span><span class="p">(</span><span class="n">predicate</span><span class="o">=</span><span class="n">OWL</span><span class="o">.</span><span class="n">onProperty</span><span class="p">,</span> <span class="nb">object</span><span class="o">=</span><span class="nb">property</span><span class="p">):</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">has</span><span class="p">(</span><span class="n">iri</span><span class="p">,</span> <span class="n">RDF</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">OWL</span><span class="o">.</span><span class="n">Restriction</span><span class="p">)</span>
                <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">cls</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">has</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">RDFS</span><span class="o">.</span><span class="n">subClassOf</span><span class="p">,</span> <span class="n">iri</span><span class="p">))</span>
                <span class="ow">and</span> <span class="nb">any</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">has</span><span class="p">(</span><span class="n">iri</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pred</span><span class="p">)</span>
                <span class="ow">and</span> <span class="p">(</span>
                    <span class="ow">not</span> <span class="n">card</span>
                    <span class="ow">or</span> <span class="ow">not</span> <span class="n">cardinality</span>
                    <span class="ow">or</span> <span class="nb">any</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">has</span><span class="p">(</span><span class="n">iri</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">lcard</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">card</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="p">):</span>
                <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_restriction_dict</span><span class="p">(</span><span class="n">iri</span><span class="p">)</span> <span class="k">if</span> <span class="n">asdict</span> <span class="k">else</span> <span class="n">iri</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_restriction_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iri</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a dict describing restriction with `iri`.</span>

<span class="sd">        The returned dict has the following keys:</span>
<span class="sd">        - iri: (str) IRI of the restriction itself (blank node).</span>
<span class="sd">        - cls: (str) IRI of class to which the restriction applies.</span>
<span class="sd">        - property: (str) IRI of restriction property</span>
<span class="sd">        - type: (str) One of: &quot;some&quot;, &quot;only&quot;, &quot;exactly&quot;, &quot;min&quot;, &quot;max&quot;, &quot;value&quot;.</span>
<span class="sd">        - cardinality: (int) Restriction cardinality (optional).</span>
<span class="sd">        - value: (str|Literal) IRI or literal value of the restriction target.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dct</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">predicate_objects</span><span class="p">(</span><span class="n">iri</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">OWL</span><span class="o">.</span><span class="n">onClass</span> <span class="ow">in</span> <span class="n">dct</span><span class="p">:</span>
            <span class="p">((</span><span class="n">t</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">c</span><span class="p">),)</span> <span class="o">=</span> <span class="p">[</span>
                <span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">t</span><span class="p">,</span> <span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_restriction_types</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">dct</span>
            <span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="p">((</span><span class="n">t</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">c</span><span class="p">),)</span> <span class="o">=</span> <span class="p">[</span>
                <span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">t</span><span class="p">,</span> <span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_restriction_types</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">dct</span>
            <span class="p">]</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;iri&quot;</span><span class="p">:</span> <span class="n">iri</span><span class="p">,</span>
            <span class="s2">&quot;cls&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">predicate</span><span class="o">=</span><span class="n">RDFS</span><span class="o">.</span><span class="n">subClassOf</span><span class="p">,</span> <span class="nb">object</span><span class="o">=</span><span class="n">iri</span><span class="p">),</span>
            <span class="s2">&quot;property&quot;</span><span class="p">:</span> <span class="n">dct</span><span class="p">[</span><span class="n">OWL</span><span class="o">.</span><span class="n">onProperty</span><span class="p">],</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">t</span><span class="p">,</span>
            <span class="s2">&quot;cardinality&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">dct</span><span class="p">[</span><span class="n">c</span><span class="p">])</span> <span class="k">if</span> <span class="n">c</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">dct</span><span class="p">[</span><span class="n">p</span><span class="p">],</span>
        <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">available</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="n">interval</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Checks if the backend is available.</span>

<span class="sd">        This is done by sending a request to the URL specified</span>
<span class="sd">        in the `check_url` attribute and checking for the response.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            timeout: Total time in seconds to wait for a response.</span>
<span class="sd">        interval: Internal time interval in seconds between checking if the</span>
<span class="sd">            service has responded.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Returns true if the service responds with code 200,</span>
<span class="sd">            otherwise false is returned.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_url</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;`check_url` must be assigned before calling available()&quot;</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">check_service_availability</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">check_url</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="n">interval</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">map</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">source</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">target</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">cost</span><span class="p">:</span> <span class="s2">&quot;Optional[Union[float, Callable]]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">target_cost</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add &#39;mapsTo&#39; relation to the triplestore.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            source: Source IRI.</span>
<span class="sd">            target: IRI of target ontological concept.</span>
<span class="sd">            cost: User-defined cost of following this mapping relation</span>
<span class="sd">                represented as a float.  It may be given either as a</span>
<span class="sd">                float or as a callable taking three arguments</span>

<span class="sd">                    cost(triplestore, input_iris, output_iri)</span>

<span class="sd">                and returning the cost as a float.</span>
<span class="sd">            target_cost: Whether the cost is assigned to mapping steps</span>
<span class="sd">                that have `target` as output.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_mapsTo</span><span class="p">(</span>
            <span class="n">target</span><span class="o">=</span><span class="n">target</span><span class="p">,</span>
            <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span>
            <span class="n">cost</span><span class="o">=</span><span class="n">cost</span><span class="p">,</span>
            <span class="n">target_cost</span><span class="o">=</span><span class="n">target_cost</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_mapsTo</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">target</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">source</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">property_name</span><span class="p">:</span> <span class="s2">&quot;Optional[str]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">cost</span><span class="p">:</span> <span class="s2">&quot;Optional[Union[float, Callable]]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">target_cost</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add &#39;mapsTo&#39; relation to triplestore.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            target: IRI of target ontological concept.</span>
<span class="sd">            source: Source IRI (or entity object).</span>
<span class="sd">            property_name: Name of property if `source` is an entity or</span>
<span class="sd">                an entity IRI.</span>
<span class="sd">            cost: User-defined cost of following this mapping relation</span>
<span class="sd">                represented as a float.  It may be given either as a</span>
<span class="sd">                float or as a callable taking three arguments</span>

<span class="sd">                    cost(triplestore, input_iris, output_iri)</span>

<span class="sd">                and returning the cost as a float.</span>
<span class="sd">            target_cost: Whether the cost is assigned to mapping steps</span>
<span class="sd">                that have `target` as output.</span>

<span class="sd">        Note:</span>
<span class="sd">            This is equivalent to the `map()` method, but reverts the</span>
<span class="sd">            two first arguments and adds the `property_name` argument.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;map&quot;</span><span class="p">,</span> <span class="n">MAP</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">property_name</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">TripperError</span><span class="p">(</span>
                <span class="s2">&quot;`property_name` is required when `target` is not a string.&quot;</span>
            <span class="p">)</span>

        <span class="n">target</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">expand_iri</span><span class="p">(</span><span class="n">target</span><span class="p">)</span>
        <span class="n">source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">expand_iri</span><span class="p">(</span><span class="n">infer_iri</span><span class="p">(</span><span class="n">source</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">property_name</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">source</span><span class="si">}</span><span class="s2">#</span><span class="si">{</span><span class="n">property_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">MAP</span><span class="o">.</span><span class="n">mapsTo</span><span class="p">,</span> <span class="n">target</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">source</span><span class="p">,</span> <span class="n">MAP</span><span class="o">.</span><span class="n">mapsTo</span><span class="p">,</span> <span class="n">target</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">cost</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">dest</span> <span class="o">=</span> <span class="n">target</span> <span class="k">if</span> <span class="n">target_cost</span> <span class="k">else</span> <span class="n">source</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_cost</span><span class="p">(</span><span class="n">cost</span><span class="p">,</span> <span class="n">dest</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func_iri</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns Python function object corresponding to `func_iri`.</span>

<span class="sd">        Raises CannotGetFunctionError on failure.</span>

<span class="sd">        If the function is cached in the the `function_repo` attribute,</span>
<span class="sd">        it is returned directly.</span>

<span class="sd">        Otherwise an attempt is made to import the module implementing the</span>
<span class="sd">        function.  If that fails, the corresponding PyPI package is first</span>
<span class="sd">        installed before importing the module again.</span>

<span class="sd">        Finally the function is cached and returned.</span>

<span class="sd">        Note: Don&#39;t use call this method directly.  Use instead the</span>
<span class="sd">        `eval_function()` method, which will at some point will provide</span>
<span class="sd">        sandboxing for security.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">func_iri</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">function_repo</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">function_repo</span><span class="p">[</span><span class="n">func_iri</span><span class="p">]:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">function_repo</span><span class="p">[</span><span class="n">func_iri</span><span class="p">]</span>

        <span class="n">func_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">func_iri</span><span class="p">,</span> <span class="n">OTEIO</span><span class="o">.</span><span class="n">hasPythonFunctionName</span><span class="p">)</span>
        <span class="n">module_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">func_iri</span><span class="p">,</span> <span class="n">OTEIO</span><span class="o">.</span><span class="n">hasPythonModuleName</span><span class="p">)</span>
        <span class="n">package_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">func_iri</span><span class="p">,</span> <span class="n">OTEIO</span><span class="o">.</span><span class="n">hasPythonPackageName</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">func_name</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">module_name</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CannotGetFunctionError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;no documentation of how to access function: </span><span class="si">{</span><span class="n">func_iri</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="c1"># Import module implementing the function</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">module</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="n">module_name</span><span class="p">,</span> <span class="n">package_name</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ModuleNotFoundError</span><span class="p">:</span>
            <span class="c1"># If we cannot find the module, try to install the pypi</span>
            <span class="c1"># package and try to import the module again</span>
            <span class="n">pypi_package</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">func_iri</span><span class="p">,</span> <span class="n">OTEIO</span><span class="o">.</span><span class="n">hasPypiPackageName</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">pypi_package</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">CannotGetFunctionError</span><span class="p">(</span>  <span class="c1"># pylint: disable=raise-missing-from</span>
                    <span class="sa">f</span><span class="s2">&quot;PyPI package not documented for function: </span><span class="si">{</span><span class="n">func_iri</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>  <span class="c1"># nosec</span>
                    <span class="n">args</span><span class="o">=</span><span class="p">[</span>
                        <span class="n">sys</span><span class="o">.</span><span class="n">executable</span><span class="p">,</span>
                        <span class="s2">&quot;-m&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;pip&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;install&quot;</span><span class="p">,</span>
                        <span class="n">pypi_package</span><span class="p">,</span>
                    <span class="p">],</span>
                    <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">except</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">CalledProcessError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">CannotGetFunctionError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;failed installing PyPI package &#39;</span><span class="si">{</span><span class="n">pypi_package</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
                <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">exc</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">module</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="n">module_name</span><span class="p">,</span> <span class="n">package_name</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ModuleNotFoundError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">CannotGetFunctionError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;failed importing module &#39;</span><span class="si">{</span><span class="n">module_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
                    <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot; from &#39;</span><span class="si">{</span><span class="n">package_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
                    <span class="k">if</span> <span class="n">package_name</span>
                    <span class="k">else</span> <span class="s2">&quot;&quot;</span>
                <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">exc</span>

        <span class="n">func</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">func_name</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">function_repo</span><span class="p">[</span><span class="n">func_iri</span><span class="p">]</span> <span class="o">=</span> <span class="n">func</span>

        <span class="k">return</span> <span class="n">func</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">eval_function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func_iri</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(),</span> <span class="n">kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Any&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Evaluate mapping function and return the result.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            func_iri: IRI of the function to be evaluated.</span>
<span class="sd">            args: Sequence of positional arguments passed to the function.</span>
<span class="sd">            kwargs: Mapping of keyword arguments passed to the function.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The return value of the function.</span>

<span class="sd">        Note:</span>
<span class="sd">            The current implementation does not protect against side</span>
<span class="sd">            effect or malicious code.  Be warned!</span>
<span class="sd">            This may be improved in the future.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_function</span><span class="p">(</span><span class="n">func_iri</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># FIXME: Add sandboxing</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_function</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">func</span><span class="p">:</span> <span class="s2">&quot;Union[Callable, str]&quot;</span><span class="p">,</span>
        <span class="n">expects</span><span class="p">:</span> <span class="s2">&quot;Union[str, Sequence, Mapping]&quot;</span> <span class="o">=</span> <span class="p">(),</span>
        <span class="n">returns</span><span class="p">:</span> <span class="s2">&quot;Union[str, Sequence]&quot;</span> <span class="o">=</span> <span class="p">(),</span>
        <span class="n">base_iri</span><span class="p">:</span> <span class="s2">&quot;Optional[str]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">standard</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;emmo&quot;</span><span class="p">,</span>
        <span class="n">cost</span><span class="p">:</span> <span class="s2">&quot;Optional[Union[float, Callable]]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">func_name</span><span class="p">:</span> <span class="s2">&quot;Optional[str]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">module_name</span><span class="p">:</span> <span class="s2">&quot;Optional[str]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">package_name</span><span class="p">:</span> <span class="s2">&quot;Optional[str]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">pypi_package_name</span><span class="p">:</span> <span class="s2">&quot;Optional[str]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="c1"># pylint: disable=too-many-branches,too-many-arguments</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Inspect function and add triples describing it to the triplestore.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            func: Function to describe.  Should either be a callable or a</span>
<span class="sd">                string with a unique function IRI.</span>
<span class="sd">            expects: Sequence of IRIs to ontological concepts corresponding</span>
<span class="sd">                to positional arguments of `func`.  May also be given as a</span>
<span class="sd">                dict mapping argument names to corresponding ontological IRIs.</span>
<span class="sd">            returns: IRI of return value.  May also be given as a sequence</span>
<span class="sd">                of IRIs, if multiple values are returned.</span>
<span class="sd">            base_iri: Base of the IRI representing the function in the</span>
<span class="sd">                knowledge base.  Defaults to the base IRI of the triplestore.</span>
<span class="sd">            standard: Name of ontology to use when describing the function.</span>
<span class="sd">                Valid values are:</span>
<span class="sd">                - &quot;emmo&quot;: Elementary Multiperspective Material Ontology (EMMO)</span>
<span class="sd">                - &quot;fno&quot;: Function Ontology (FnO)</span>
<span class="sd">            cost: User-defined cost of following this mapping relation</span>
<span class="sd">                represented as a float.  It may be given either as a</span>
<span class="sd">                float or as a callable taking three arguments</span>

<span class="sd">                    cost(triplestore, input_iris, output_iri)</span>

<span class="sd">                and returning the cost as a float.</span>
<span class="sd">            func_name: Function name.  Needed if `func` is given as an IRI.</span>
<span class="sd">            module_name: Fully qualified name of Python module implementing</span>
<span class="sd">                this function.  Default is to infer from `func`.</span>
<span class="sd">                implementing the function.</span>
<span class="sd">            package_name: Name of Python package implementing this function.</span>
<span class="sd">                Default is inferred from either the module or first part of</span>
<span class="sd">                `module_name`.</span>
<span class="sd">            pypi_package_name: Name and version of PyPI package implementing</span>
<span class="sd">                this mapping function (specified as in requirements.txt).</span>
<span class="sd">                Defaults to `package_name`.</span>

<span class="sd">        Returns:</span>
<span class="sd">            func_iri: IRI of the added function.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expects</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">expects</span> <span class="o">=</span> <span class="p">[</span><span class="n">expects</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">returns</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">returns</span> <span class="o">=</span> <span class="p">[</span><span class="n">returns</span><span class="p">]</span>

        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;_add_function_</span><span class="si">{</span><span class="n">standard</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">func_iri</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">expects</span><span class="p">,</span> <span class="n">returns</span><span class="p">,</span> <span class="n">base_iri</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">function_repo</span><span class="p">[</span><span class="n">func_iri</span><span class="p">]</span> <span class="o">=</span> <span class="n">func</span> <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">func</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">cost</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_cost</span><span class="p">(</span><span class="n">cost</span><span class="p">,</span> <span class="n">func_iri</span><span class="p">)</span>

        <span class="c1"># Add standard-independent documentation of how to access the</span>
        <span class="c1"># mapping function</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_function_doc</span><span class="p">(</span>
            <span class="n">func</span><span class="o">=</span><span class="n">func</span> <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">func</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">func_iri</span><span class="o">=</span><span class="n">func_iri</span><span class="p">,</span>
            <span class="n">func_name</span><span class="o">=</span><span class="n">func_name</span><span class="p">,</span>
            <span class="n">module_name</span><span class="o">=</span><span class="n">module_name</span><span class="p">,</span>
            <span class="n">package_name</span><span class="o">=</span><span class="n">package_name</span><span class="p">,</span>
            <span class="n">pypi_package_name</span><span class="o">=</span><span class="n">pypi_package_name</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">func_iri</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_add_function_doc</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">func_iri</span><span class="p">:</span> <span class="s2">&quot;str&quot;</span><span class="p">,</span>
        <span class="n">func</span><span class="p">:</span> <span class="s2">&quot;Optional[Callable]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">func_name</span><span class="p">:</span> <span class="s2">&quot;Optional[str]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">module_name</span><span class="p">:</span> <span class="s2">&quot;Optional[str]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">package_name</span><span class="p">:</span> <span class="s2">&quot;Optional[str]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">pypi_package_name</span><span class="p">:</span> <span class="s2">&quot;Optional[str]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add standard-independent documentation of how to access the</span>
<span class="sd">        function.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            func_iri: IRI of individual in the triplestore that stands for</span>
<span class="sd">                the function.</span>
<span class="sd">            func: Optional reference to the function itself.</span>
<span class="sd">            func_name: Function name.  Needed if `func` is given as an IRI.</span>
<span class="sd">            module_name: Fully qualified name of Python module implementing</span>
<span class="sd">                this function.  Default is to infer from `func`.</span>
<span class="sd">                implementing the function.</span>
<span class="sd">            package_name: Name of Python package implementing this function.</span>
<span class="sd">                Default is inferred from either the module or first part of</span>
<span class="sd">                `module_name`.</span>
<span class="sd">            pypi_package_name: Name and version of PyPI package implementing</span>
<span class="sd">                this mapping function (specified as in requirements.txt).</span>
<span class="sd">                Defaults to `package_name`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
            <span class="n">func_name</span> <span class="o">=</span> <span class="n">func</span><span class="o">.</span><span class="vm">__name__</span>
            <span class="n">module</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getmodule</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">module</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;inspect is not able to infer module from function &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
                <span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">module_name</span><span class="p">:</span>
                <span class="n">module_name</span> <span class="o">=</span> <span class="n">module</span><span class="o">.</span><span class="vm">__name__</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">package_name</span><span class="p">:</span>
                <span class="n">package_name</span> <span class="o">=</span> <span class="n">module</span><span class="o">.</span><span class="n">__package__</span>  <span class="c1"># type: ignore</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">pypi_package_name</span><span class="p">:</span>
                <span class="n">pypi_package_name</span> <span class="o">=</span> <span class="n">package_name</span>

        <span class="k">if</span> <span class="n">func_name</span> <span class="ow">and</span> <span class="n">module_name</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;oteio&quot;</span><span class="p">,</span> <span class="n">OTEIO</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
                <span class="p">(</span>
                    <span class="n">func_iri</span><span class="p">,</span>
                    <span class="n">OTEIO</span><span class="o">.</span><span class="n">hasPythonFunctionName</span><span class="p">,</span>
                    <span class="n">Literal</span><span class="p">(</span><span class="n">func_name</span><span class="p">,</span> <span class="n">datatype</span><span class="o">=</span><span class="n">XSD</span><span class="o">.</span><span class="n">string</span><span class="p">),</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
                <span class="p">(</span>
                    <span class="n">func_iri</span><span class="p">,</span>
                    <span class="n">OTEIO</span><span class="o">.</span><span class="n">hasPythonModuleName</span><span class="p">,</span>
                    <span class="n">Literal</span><span class="p">(</span><span class="n">module_name</span><span class="p">,</span> <span class="n">datatype</span><span class="o">=</span><span class="n">XSD</span><span class="o">.</span><span class="n">string</span><span class="p">),</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">package_name</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
                    <span class="p">(</span>
                        <span class="n">func_iri</span><span class="p">,</span>
                        <span class="n">OTEIO</span><span class="o">.</span><span class="n">hasPythonPackageName</span><span class="p">,</span>
                        <span class="n">Literal</span><span class="p">(</span><span class="n">package_name</span><span class="p">,</span> <span class="n">datatype</span><span class="o">=</span><span class="n">XSD</span><span class="o">.</span><span class="n">string</span><span class="p">),</span>
                    <span class="p">)</span>
                <span class="p">)</span>
            <span class="k">if</span> <span class="n">pypi_package_name</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
                    <span class="p">(</span>
                        <span class="n">func_iri</span><span class="p">,</span>
                        <span class="n">OTEIO</span><span class="o">.</span><span class="n">hasPypiPackageName</span><span class="p">,</span>
                        <span class="n">Literal</span><span class="p">(</span><span class="n">pypi_package_name</span><span class="p">,</span> <span class="n">datatype</span><span class="o">=</span><span class="n">XSD</span><span class="o">.</span><span class="n">string</span><span class="p">),</span>
                    <span class="p">)</span>
                <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Function and module name for function &#39;</span><span class="si">{</span><span class="n">func_name</span><span class="si">}</span><span class="s2">&#39; &quot;</span>
                <span class="s2">&quot;is not provided and cannot be inferred.  How to access &quot;</span>
                <span class="s2">&quot;the function will not be documented.&quot;</span><span class="p">,</span>
                <span class="n">stacklevel</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_add_cost</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">cost</span><span class="p">:</span> <span class="s2">&quot;Union[float, Callable]&quot;</span><span class="p">,</span>
        <span class="n">dest_iri</span><span class="p">,</span>
        <span class="n">base_iri</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">pypi_package_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Help function that adds `cost` to destination IRI `dest_iri`.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            cost: User-defined cost of following this mapping relation</span>
<span class="sd">                represented as a float.  It may be given either as a</span>
<span class="sd">                float or as a callable taking three arguments</span>

<span class="sd">                    cost(triplestore, input_iris, output_iri)</span>

<span class="sd">                and returning the cost as a float.</span>
<span class="sd">            dest_iri: destination iri that the cost should be associated with.</span>
<span class="sd">            base_iri: Base of the IRI representing the function in the</span>
<span class="sd">                knowledge base.  Defaults to the base IRI of the triplestore.</span>
<span class="sd">            pypi_package_name: Name and version of PyPI package implementing</span>
<span class="sd">                this cost function (specified as in requirements.txt).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">base_iri</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">base_iri</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_iri</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_iri</span> <span class="k">else</span> <span class="s2">&quot;:&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has</span><span class="p">(</span><span class="n">dest_iri</span><span class="p">,</span> <span class="n">DM</span><span class="o">.</span><span class="n">hasCost</span><span class="p">):</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;A cost is already assigned to IRI: </span><span class="si">{</span><span class="n">dest_iri</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">callable</span><span class="p">(</span><span class="n">cost</span><span class="p">):</span>
            <span class="n">cost_iri</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">base_iri</span><span class="si">}</span><span class="s2">cost_function</span><span class="si">{</span><span class="n">function_id</span><span class="p">(</span><span class="n">cost</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
                <span class="p">(</span><span class="n">dest_iri</span><span class="p">,</span> <span class="n">DM</span><span class="o">.</span><span class="n">hasCost</span><span class="p">,</span> <span class="n">Literal</span><span class="p">(</span><span class="n">cost_iri</span><span class="p">,</span> <span class="n">datatype</span><span class="o">=</span><span class="n">XSD</span><span class="o">.</span><span class="n">anyURI</span><span class="p">))</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">function_repo</span><span class="p">[</span><span class="n">cost_iri</span><span class="p">]</span> <span class="o">=</span> <span class="n">cost</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_function_doc</span><span class="p">(</span>
                <span class="n">func</span><span class="o">=</span><span class="n">cost</span><span class="p">,</span>
                <span class="n">func_iri</span><span class="o">=</span><span class="n">cost_iri</span><span class="p">,</span>
                <span class="n">pypi_package_name</span><span class="o">=</span><span class="n">pypi_package_name</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">dest_iri</span><span class="p">,</span> <span class="n">DM</span><span class="o">.</span><span class="n">hasCost</span><span class="p">,</span> <span class="n">Literal</span><span class="p">(</span><span class="n">cost</span><span class="p">)))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_cost</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dest_iri</span><span class="p">,</span> <span class="n">input_iris</span><span class="o">=</span><span class="p">(),</span> <span class="n">output_iri</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return evaluated cost for given destination iri.&quot;&quot;&quot;</span>
        <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">dest_iri</span><span class="p">,</span> <span class="n">DM</span><span class="o">.</span><span class="n">hasCost</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">datatype</span> <span class="ow">and</span> <span class="n">v</span><span class="o">.</span><span class="n">datatype</span> <span class="o">!=</span> <span class="n">XSD</span><span class="o">.</span><span class="n">anyURI</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">v</span><span class="o">.</span><span class="n">value</span>
        <span class="n">cost</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_function</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">cost</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_iris</span><span class="p">,</span> <span class="n">output_iri</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_add_function_fno</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="n">expects</span><span class="p">,</span> <span class="n">returns</span><span class="p">,</span> <span class="n">base_iri</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Implementing add_function() for FnO.&quot;&quot;&quot;</span>
        <span class="c1"># pylint: disable=too-many-locals,too-many-statements</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;fno&quot;</span><span class="p">,</span> <span class="n">FNO</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;dcterms&quot;</span><span class="p">,</span> <span class="n">DCTERMS</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;map&quot;</span><span class="p">,</span> <span class="n">MAP</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">base_iri</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">base_iri</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_iri</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_iri</span> <span class="k">else</span> <span class="s2">&quot;:&quot;</span>

        <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
            <span class="n">fid</span> <span class="o">=</span> <span class="n">function_id</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>  <span class="c1"># Function id</span>
            <span class="n">func_iri</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">base_iri</span><span class="si">}{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">fid</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">func</span><span class="o">.</span><span class="vm">__name__</span>
            <span class="n">doc_string</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getdoc</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
            <span class="n">parlist</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;_:</span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}{</span><span class="n">fid</span><span class="si">}</span><span class="s2">_parlist&quot;</span>
            <span class="n">outlist</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;_:</span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}{</span><span class="n">fid</span><span class="si">}</span><span class="s2">_outlist&quot;</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expects</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">):</span>
                <span class="n">pars</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">expects</span><span class="p">,</span> <span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="n">func</span><span class="p">)</span><span class="o">.</span><span class="n">parameters</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">pars</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="p">(</span><span class="n">expects</span><span class="p">[</span><span class="n">par</span><span class="p">],</span> <span class="n">par</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">par</span> <span class="ow">in</span> <span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="n">func</span><span class="p">)</span><span class="o">.</span><span class="n">parameters</span>
                <span class="p">]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">func_iri</span> <span class="o">=</span> <span class="n">func</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">split_iri</span><span class="p">(</span><span class="n">func</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">doc_string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="n">parlist</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;_:</span><span class="si">{</span><span class="n">func_iri</span><span class="si">}</span><span class="s2">_parlist&quot;</span>
            <span class="n">outlist</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;_:</span><span class="si">{</span><span class="n">func_iri</span><span class="si">}</span><span class="s2">_outlist&quot;</span>
            <span class="n">pariris</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">expects</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expects</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">)</span> <span class="k">else</span> <span class="n">expects</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
            <span class="p">)</span>
            <span class="n">parnames</span> <span class="o">=</span> <span class="p">[</span><span class="n">split_iri</span><span class="p">(</span><span class="n">pariri</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">pariri</span> <span class="ow">in</span> <span class="n">pariris</span><span class="p">]</span>
            <span class="n">pars</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">pariris</span><span class="p">,</span> <span class="n">parnames</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;`func` should be either a callable or an IRI&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">func_iri</span><span class="p">,</span> <span class="n">RDF</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">FNO</span><span class="o">.</span><span class="n">Function</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">func_iri</span><span class="p">,</span> <span class="n">RDFS</span><span class="o">.</span><span class="n">label</span><span class="p">,</span> <span class="n">en</span><span class="p">(</span><span class="n">name</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">func_iri</span><span class="p">,</span> <span class="n">FNO</span><span class="o">.</span><span class="n">expects</span><span class="p">,</span> <span class="n">parlist</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">func_iri</span><span class="p">,</span> <span class="n">FNO</span><span class="o">.</span><span class="n">returns</span><span class="p">,</span> <span class="n">outlist</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">doc_string</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">func_iri</span><span class="p">,</span> <span class="n">DCTERMS</span><span class="o">.</span><span class="n">description</span><span class="p">,</span> <span class="n">en</span><span class="p">(</span><span class="n">doc_string</span><span class="p">)))</span>

        <span class="n">lst</span> <span class="o">=</span> <span class="n">parlist</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">iri</span><span class="p">,</span> <span class="n">parname</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">pars</span><span class="p">):</span>
            <span class="n">lst_next</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">parlist</span><span class="si">}{</span><span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">pars</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span> <span class="k">else</span> <span class="n">RDF</span><span class="o">.</span><span class="n">nil</span>
            <span class="n">par</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">func_iri</span><span class="si">}</span><span class="s2">_parameter</span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">parname</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">par</span><span class="p">,</span> <span class="n">RDF</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">FNO</span><span class="o">.</span><span class="n">Parameter</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">par</span><span class="p">,</span> <span class="n">RDFS</span><span class="o">.</span><span class="n">label</span><span class="p">,</span> <span class="n">en</span><span class="p">(</span><span class="n">parname</span><span class="p">)))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">par</span><span class="p">,</span> <span class="n">MAP</span><span class="o">.</span><span class="n">mapsTo</span><span class="p">,</span> <span class="n">iri</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">lst</span><span class="p">,</span> <span class="n">RDF</span><span class="o">.</span><span class="n">first</span><span class="p">,</span> <span class="n">par</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">lst</span><span class="p">,</span> <span class="n">RDF</span><span class="o">.</span><span class="n">rest</span><span class="p">,</span> <span class="n">lst_next</span><span class="p">))</span>
            <span class="n">lst</span> <span class="o">=</span> <span class="n">lst_next</span>

        <span class="n">lst</span> <span class="o">=</span> <span class="n">outlist</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">iri</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">returns</span><span class="p">):</span>
            <span class="n">lst_next</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">outlist</span><span class="si">}{</span><span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">returns</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span> <span class="k">else</span> <span class="n">RDF</span><span class="o">.</span><span class="n">nil</span>
            <span class="n">val</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">func_iri</span><span class="si">}</span><span class="s2">_output</span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">val</span><span class="p">,</span> <span class="n">RDF</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">FNO</span><span class="o">.</span><span class="n">Output</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">val</span><span class="p">,</span> <span class="n">MAP</span><span class="o">.</span><span class="n">mapsTo</span><span class="p">,</span> <span class="n">iri</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">lst</span><span class="p">,</span> <span class="n">RDF</span><span class="o">.</span><span class="n">first</span><span class="p">,</span> <span class="n">val</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">lst</span><span class="p">,</span> <span class="n">RDF</span><span class="o">.</span><span class="n">rest</span><span class="p">,</span> <span class="n">lst_next</span><span class="p">))</span>
            <span class="n">lst</span> <span class="o">=</span> <span class="n">lst_next</span>

        <span class="k">return</span> <span class="n">func_iri</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_add_function_emmo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="n">expects</span><span class="p">,</span> <span class="n">returns</span><span class="p">,</span> <span class="n">base_iri</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Implementing add_function() method for the &quot;emmo&quot; standard.&quot;&quot;&quot;</span>
        <span class="c1"># pylint: disable=too-many-locals</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;emmo&quot;</span><span class="p">,</span> <span class="n">EMMO</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;dcterms&quot;</span><span class="p">,</span> <span class="n">DCTERMS</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;map&quot;</span><span class="p">,</span> <span class="n">MAP</span><span class="p">)</span>

        <span class="c1"># Hardcode EMMO IRIs to avoid slow lookup</span>
        <span class="n">Task</span> <span class="o">=</span> <span class="n">EMMO</span><span class="o">.</span><span class="n">EMMO_4299e344_a321_4ef2_a744_bacfcce80afc</span>
        <span class="n">Datum</span> <span class="o">=</span> <span class="n">EMMO</span><span class="o">.</span><span class="n">EMMO_50d6236a_7667_4883_8ae1_9bb5d190423a</span>
        <span class="n">hasInput</span> <span class="o">=</span> <span class="n">EMMO</span><span class="o">.</span><span class="n">EMMO_36e69413_8c59_4799_946c_10b05d266e22</span>
        <span class="n">hasOutput</span> <span class="o">=</span> <span class="n">EMMO</span><span class="o">.</span><span class="n">EMMO_c4bace1d_4db0_4cd3_87e9_18122bae2840</span>
        <span class="c1"># Software = EMMO.EMMO_8681074a_e225_4e38_b586_e85b0f43ce38</span>
        <span class="c1"># hasSoftware = EMMO.Software  # TODO: fix when EMMO has hasSoftware</span>

        <span class="k">if</span> <span class="n">base_iri</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">base_iri</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_iri</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_iri</span> <span class="k">else</span> <span class="s2">&quot;:&quot;</span>

        <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
            <span class="n">fid</span> <span class="o">=</span> <span class="n">function_id</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>  <span class="c1"># Function id</span>
            <span class="n">func_iri</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">base_iri</span><span class="si">}{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">fid</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">func</span><span class="o">.</span><span class="vm">__name__</span>
            <span class="n">doc_string</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getdoc</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expects</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">):</span>
                <span class="n">pars</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="n">func</span><span class="p">)</span><span class="o">.</span><span class="n">parameters</span><span class="p">,</span> <span class="n">expects</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">pars</span> <span class="o">=</span> <span class="n">expects</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">func_iri</span> <span class="o">=</span> <span class="n">func</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">split_iri</span><span class="p">(</span><span class="n">func</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">doc_string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="n">pariris</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">expects</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expects</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">)</span> <span class="k">else</span> <span class="n">expects</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
            <span class="p">)</span>
            <span class="n">parnames</span> <span class="o">=</span> <span class="p">[</span><span class="n">split_iri</span><span class="p">(</span><span class="n">pariri</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">pariri</span> <span class="ow">in</span> <span class="n">pariris</span><span class="p">]</span>
            <span class="n">pars</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">parnames</span><span class="p">,</span> <span class="n">pariris</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;`func` should be either a callable or an IRI&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">func_iri</span><span class="p">,</span> <span class="n">RDF</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">Task</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">func_iri</span><span class="p">,</span> <span class="n">RDFS</span><span class="o">.</span><span class="n">label</span><span class="p">,</span> <span class="n">en</span><span class="p">(</span><span class="n">name</span><span class="p">)))</span>
        <span class="k">for</span> <span class="n">parname</span><span class="p">,</span> <span class="n">iri</span> <span class="ow">in</span> <span class="n">pars</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">iri</span><span class="p">,</span> <span class="n">RDF</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">Datum</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">iri</span><span class="p">,</span> <span class="n">RDFS</span><span class="o">.</span><span class="n">label</span><span class="p">,</span> <span class="n">en</span><span class="p">(</span><span class="n">parname</span><span class="p">)))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">func_iri</span><span class="p">,</span> <span class="n">hasInput</span><span class="p">,</span> <span class="n">iri</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">iri</span> <span class="ow">in</span> <span class="n">returns</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">iri</span><span class="p">,</span> <span class="n">RDF</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">Datum</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">func_iri</span><span class="p">,</span> <span class="n">hasOutput</span><span class="p">,</span> <span class="n">iri</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">doc_string</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">func_iri</span><span class="p">,</span> <span class="n">DCTERMS</span><span class="o">.</span><span class="n">description</span><span class="p">,</span> <span class="n">en</span><span class="p">(</span><span class="n">doc_string</span><span class="p">)))</span>

        <span class="k">return</span> <span class="n">func_iri</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h3 id="tripper.triplestore.Triplestore.prefer_sparql" class="doc doc-heading">
<code class="highlight language-python"><span class="n">prefer_sparql</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#tripper.triplestore.Triplestore.prefer_sparql" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Whether the backend prefer SPARQL over the triples() interface. Is None if not specified by the backend.</p>
<p>Even though Tripper requires that the Triplestore.triples() is implemented, Triplestore.query() must be used for some backends in specific cases (like fuseki when working on RDF lists) because of how blank nodes are treated. </p>
<p>The purpose of this property is to let tripper automatically select the most appropriate interface depending on the current backend settings.</p>
    </div>

  </div>








  <div class="doc doc-object doc-method">



<h3 id="tripper.triplestore.Triplestore.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">backend</span><span class="p">,</span> <span class="n">base_iri</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">database</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">package</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">check_url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#tripper.triplestore.Triplestore.__init__" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Initialise triplestore using the backend with the given name.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>backend</code></td>
        <td><code>str</code></td>
        <td><p>Name of the backend module.</p>
<p>For built-in backends or backends provided via a
backend package (using entrypoints), this should just
be the name of the backend with no dots (ex: "rdflib").</p>
<p>For a custom backend, you can provide the full module name,
including the dots (ex:"mypackage.mybackend").  If <code>package</code>
is given, <code>backend</code> is interpreted relative to <code>package</code>
(ex: ..mybackend).</p>
<p>For a list over available backends, see
https://github.com/EMMC-ASBL/tripper#available-backends</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>base_iri</code></td>
        <td><code>&#39;Optional[str]&#39;</code></td>
        <td><p>Base IRI used by the add_function() method when adding
new triples. May also be used by the backend.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>database</code></td>
        <td><code>&#39;Optional[str]&#39;</code></td>
        <td><p>Name of database to connect to (for backends that
supports it).</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>package</code></td>
        <td><code>&#39;Optional[str]&#39;</code></td>
        <td><p>Required when <code>backend</code> is a relative module.  In that
case, it is relative to <code>package</code>.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>check_url</code></td>
        <td><code>&#39;Optional[str]&#39;</code></td>
        <td><p>A URL to use for checking that the backend is available.
Defaults to <code>base_iri</code>.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>kwargs</code></td>
        <td></td>
        <td><p>Keyword arguments passed to the backend's <strong>init</strong>()
method.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Attributes:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>backend_name</code></td>
        <td></td>
        <td><p>Name of backend.</p></td>
      </tr>
      <tr>
        <td><code>base_iri</code></td>
        <td></td>
        <td><p>Assigned to the <code>base_iri</code> argument.</p></td>
      </tr>
      <tr>
        <td><code>closed</code></td>
        <td></td>
        <td><p>Whether the triplestore is closed.</p></td>
      </tr>
      <tr>
        <td><code>kwargs</code></td>
        <td></td>
        <td><p>Dict with additional keyword arguments.</p></td>
      </tr>
      <tr>
        <td><code>namespaces</code></td>
        <td></td>
        <td><p>Dict mapping namespace prefixes to IRIs.</p></td>
      </tr>
      <tr>
        <td><code>package</code></td>
        <td></td>
        <td><p>Name of Python package if the backend is implemented as
a relative module. Assigned to the <code>package</code> argument.</p></td>
      </tr>
      <tr>
        <td><code>check_url</code></td>
        <td></td>
        <td><p>The value of the <code>check_url</code> argument.</p></td>
      </tr>
  </tbody>
</table>      <div class="admonition notes">
<p class="admonition-title">Notes</p>
<p>If the backend establishes a connection that should be closed
it is useful to instantiate the Triplestore as a context manager:</p>
<div class="language-text highlight"><pre><span></span><code>&gt;&gt;&gt; import tripper
&gt;&gt;&gt; with tripper.Triplestore(&quot;rdflib&quot;) as ts:
...     print(ts.backend_name)
rdflib
</code></pre></div>
<p>This ensures that the connection is automatically closed when the
context manager exits.</p>
</div>

        <details class="quote">
          <summary>Source code in <code>tripper/triplestore.py</code></summary>
          <div class="language-python highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">backend</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">base_iri</span><span class="p">:</span> <span class="s2">&quot;Optional[str]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">database</span><span class="p">:</span> <span class="s2">&quot;Optional[str]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">package</span><span class="p">:</span> <span class="s2">&quot;Optional[str]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">check_url</span><span class="p">:</span> <span class="s2">&quot;Optional[str]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialise triplestore using the backend with the given name.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        backend: Name of the backend module.</span>

<span class="sd">            For built-in backends or backends provided via a</span>
<span class="sd">            backend package (using entrypoints), this should just</span>
<span class="sd">            be the name of the backend with no dots (ex: &quot;rdflib&quot;).</span>

<span class="sd">            For a custom backend, you can provide the full module name,</span>
<span class="sd">            including the dots (ex:&quot;mypackage.mybackend&quot;).  If `package`</span>
<span class="sd">            is given, `backend` is interpreted relative to `package`</span>
<span class="sd">            (ex: ..mybackend).</span>

<span class="sd">            For a list over available backends, see</span>
<span class="sd">            https://github.com/EMMC-ASBL/tripper#available-backends</span>

<span class="sd">        base_iri: Base IRI used by the add_function() method when adding</span>
<span class="sd">            new triples. May also be used by the backend.</span>
<span class="sd">        database: Name of database to connect to (for backends that</span>
<span class="sd">            supports it).</span>
<span class="sd">        package: Required when `backend` is a relative module.  In that</span>
<span class="sd">            case, it is relative to `package`.</span>
<span class="sd">        check_url: A URL to use for checking that the backend is available.</span>
<span class="sd">            Defaults to `base_iri`.</span>
<span class="sd">        kwargs: Keyword arguments passed to the backend&#39;s __init__()</span>
<span class="sd">            method.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        backend_name: Name of backend.</span>
<span class="sd">        base_iri: Assigned to the `base_iri` argument.</span>
<span class="sd">        closed: Whether the triplestore is closed.</span>
<span class="sd">        kwargs: Dict with additional keyword arguments.</span>
<span class="sd">        namespaces: Dict mapping namespace prefixes to IRIs.</span>
<span class="sd">        package: Name of Python package if the backend is implemented as</span>
<span class="sd">            a relative module. Assigned to the `package` argument.</span>
<span class="sd">        check_url: The value of the `check_url` argument.</span>

<span class="sd">    Notes:</span>
<span class="sd">        If the backend establishes a connection that should be closed</span>
<span class="sd">        it is useful to instantiate the Triplestore as a context manager:</span>

<span class="sd">            &gt;&gt;&gt; import tripper</span>
<span class="sd">            &gt;&gt;&gt; with tripper.Triplestore(&quot;rdflib&quot;) as ts:</span>
<span class="sd">            ...     print(ts.backend_name)</span>
<span class="sd">            rdflib</span>

<span class="sd">        This ensures that the connection is automatically closed when the</span>
<span class="sd">        context manager exits.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">backend_name</span> <span class="o">=</span> <span class="n">backend</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">module</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_backend</span><span class="p">(</span><span class="n">backend</span><span class="p">,</span> <span class="n">package</span><span class="p">)</span>
    <span class="bp">cls</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">backend_name</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="si">}</span><span class="s2">Strategy&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">base_iri</span> <span class="o">=</span> <span class="n">base_iri</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">namespaces</span><span class="p">:</span> <span class="s2">&quot;Dict[str, Namespace]&quot;</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">closed</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">backend_name</span> <span class="o">=</span> <span class="n">backend_name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">database</span> <span class="o">=</span> <span class="n">database</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">package</span> <span class="o">=</span> <span class="n">package</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">check_url</span> <span class="o">=</span> <span class="n">check_url</span> <span class="k">if</span> <span class="n">check_url</span> <span class="k">else</span> <span class="n">base_iri</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">backend</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">base_iri</span><span class="o">=</span><span class="n">base_iri</span><span class="p">,</span> <span class="n">database</span><span class="o">=</span><span class="n">database</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="c1"># Cache functions in the triplestore for fast access</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">function_repo</span><span class="p">:</span> <span class="s2">&quot;Dict[str, Union[float, Callable, None]]&quot;</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">for</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">namespace</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_namespaces</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="n">namespace</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="tripper.triplestore.Triplestore.add" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">triple</span><span class="p">)</span></code>


<a href="#tripper.triplestore.Triplestore.add" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Add <code>triple</code> to triplestore.</p>

        <details class="quote">
          <summary>Source code in <code>tripper/triplestore.py</code></summary>
          <div class="language-python highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">triple</span><span class="p">:</span> <span class="s2">&quot;Triple&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add `triple` to triplestore.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_triples</span><span class="p">([</span><span class="n">triple</span><span class="p">])</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="tripper.triplestore.Triplestore.add_function" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="n">expects</span><span class="o">=</span><span class="p">(),</span> <span class="n">returns</span><span class="o">=</span><span class="p">(),</span> <span class="n">base_iri</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">standard</span><span class="o">=</span><span class="s1">&#39;emmo&#39;</span><span class="p">,</span> <span class="n">cost</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">func_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">module_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">package_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">pypi_package_name</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#tripper.triplestore.Triplestore.add_function" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Inspect function and add triples describing it to the triplestore.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>func</code></td>
        <td><code>&#39;Union[Callable, str]&#39;</code></td>
        <td><p>Function to describe.  Should either be a callable or a
string with a unique function IRI.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>expects</code></td>
        <td><code>&#39;Union[str, Sequence, Mapping]&#39;</code></td>
        <td><p>Sequence of IRIs to ontological concepts corresponding
to positional arguments of <code>func</code>.  May also be given as a
dict mapping argument names to corresponding ontological IRIs.</p></td>
        <td><code>()</code></td>
      </tr>
      <tr>
        <td><code>returns</code></td>
        <td><code>&#39;Union[str, Sequence]&#39;</code></td>
        <td><p>IRI of return value.  May also be given as a sequence
of IRIs, if multiple values are returned.</p></td>
        <td><code>()</code></td>
      </tr>
      <tr>
        <td><code>base_iri</code></td>
        <td><code>&#39;Optional[str]&#39;</code></td>
        <td><p>Base of the IRI representing the function in the
knowledge base.  Defaults to the base IRI of the triplestore.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>standard</code></td>
        <td><code>str</code></td>
        <td><p>Name of ontology to use when describing the function.
Valid values are:
- "emmo": Elementary Multiperspective Material Ontology (EMMO)
- "fno": Function Ontology (FnO)</p></td>
        <td><code>&#39;emmo&#39;</code></td>
      </tr>
      <tr>
        <td><code>cost</code></td>
        <td><code>&#39;Optional[Union[float, Callable]]&#39;</code></td>
        <td><p>User-defined cost of following this mapping relation
represented as a float.  It may be given either as a
float or as a callable taking three arguments</p>
<div class="language-text highlight"><pre><span></span><code>cost(triplestore, input_iris, output_iri)
</code></pre></div>
<p>and returning the cost as a float.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>func_name</code></td>
        <td><code>&#39;Optional[str]&#39;</code></td>
        <td><p>Function name.  Needed if <code>func</code> is given as an IRI.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>module_name</code></td>
        <td><code>&#39;Optional[str]&#39;</code></td>
        <td><p>Fully qualified name of Python module implementing
this function.  Default is to infer from <code>func</code>.
implementing the function.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>package_name</code></td>
        <td><code>&#39;Optional[str]&#39;</code></td>
        <td><p>Name of Python package implementing this function.
Default is inferred from either the module or first part of
<code>module_name</code>.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>pypi_package_name</code></td>
        <td><code>&#39;Optional[str]&#39;</code></td>
        <td><p>Name and version of PyPI package implementing
this mapping function (specified as in requirements.txt).
Defaults to <code>package_name</code>.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>func_iri</code></td>
      <td><p>IRI of the added function.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>tripper/triplestore.py</code></summary>
          <div class="language-python highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_function</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">func</span><span class="p">:</span> <span class="s2">&quot;Union[Callable, str]&quot;</span><span class="p">,</span>
    <span class="n">expects</span><span class="p">:</span> <span class="s2">&quot;Union[str, Sequence, Mapping]&quot;</span> <span class="o">=</span> <span class="p">(),</span>
    <span class="n">returns</span><span class="p">:</span> <span class="s2">&quot;Union[str, Sequence]&quot;</span> <span class="o">=</span> <span class="p">(),</span>
    <span class="n">base_iri</span><span class="p">:</span> <span class="s2">&quot;Optional[str]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">standard</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;emmo&quot;</span><span class="p">,</span>
    <span class="n">cost</span><span class="p">:</span> <span class="s2">&quot;Optional[Union[float, Callable]]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">func_name</span><span class="p">:</span> <span class="s2">&quot;Optional[str]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">module_name</span><span class="p">:</span> <span class="s2">&quot;Optional[str]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">package_name</span><span class="p">:</span> <span class="s2">&quot;Optional[str]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">pypi_package_name</span><span class="p">:</span> <span class="s2">&quot;Optional[str]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="c1"># pylint: disable=too-many-branches,too-many-arguments</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Inspect function and add triples describing it to the triplestore.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        func: Function to describe.  Should either be a callable or a</span>
<span class="sd">            string with a unique function IRI.</span>
<span class="sd">        expects: Sequence of IRIs to ontological concepts corresponding</span>
<span class="sd">            to positional arguments of `func`.  May also be given as a</span>
<span class="sd">            dict mapping argument names to corresponding ontological IRIs.</span>
<span class="sd">        returns: IRI of return value.  May also be given as a sequence</span>
<span class="sd">            of IRIs, if multiple values are returned.</span>
<span class="sd">        base_iri: Base of the IRI representing the function in the</span>
<span class="sd">            knowledge base.  Defaults to the base IRI of the triplestore.</span>
<span class="sd">        standard: Name of ontology to use when describing the function.</span>
<span class="sd">            Valid values are:</span>
<span class="sd">            - &quot;emmo&quot;: Elementary Multiperspective Material Ontology (EMMO)</span>
<span class="sd">            - &quot;fno&quot;: Function Ontology (FnO)</span>
<span class="sd">        cost: User-defined cost of following this mapping relation</span>
<span class="sd">            represented as a float.  It may be given either as a</span>
<span class="sd">            float or as a callable taking three arguments</span>

<span class="sd">                cost(triplestore, input_iris, output_iri)</span>

<span class="sd">            and returning the cost as a float.</span>
<span class="sd">        func_name: Function name.  Needed if `func` is given as an IRI.</span>
<span class="sd">        module_name: Fully qualified name of Python module implementing</span>
<span class="sd">            this function.  Default is to infer from `func`.</span>
<span class="sd">            implementing the function.</span>
<span class="sd">        package_name: Name of Python package implementing this function.</span>
<span class="sd">            Default is inferred from either the module or first part of</span>
<span class="sd">            `module_name`.</span>
<span class="sd">        pypi_package_name: Name and version of PyPI package implementing</span>
<span class="sd">            this mapping function (specified as in requirements.txt).</span>
<span class="sd">            Defaults to `package_name`.</span>

<span class="sd">    Returns:</span>
<span class="sd">        func_iri: IRI of the added function.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expects</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">expects</span> <span class="o">=</span> <span class="p">[</span><span class="n">expects</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">returns</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">returns</span> <span class="o">=</span> <span class="p">[</span><span class="n">returns</span><span class="p">]</span>

    <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;_add_function_</span><span class="si">{</span><span class="n">standard</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">func_iri</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">expects</span><span class="p">,</span> <span class="n">returns</span><span class="p">,</span> <span class="n">base_iri</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">function_repo</span><span class="p">[</span><span class="n">func_iri</span><span class="p">]</span> <span class="o">=</span> <span class="n">func</span> <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">func</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">cost</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_cost</span><span class="p">(</span><span class="n">cost</span><span class="p">,</span> <span class="n">func_iri</span><span class="p">)</span>

    <span class="c1"># Add standard-independent documentation of how to access the</span>
    <span class="c1"># mapping function</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_add_function_doc</span><span class="p">(</span>
        <span class="n">func</span><span class="o">=</span><span class="n">func</span> <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">func</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">func_iri</span><span class="o">=</span><span class="n">func_iri</span><span class="p">,</span>
        <span class="n">func_name</span><span class="o">=</span><span class="n">func_name</span><span class="p">,</span>
        <span class="n">module_name</span><span class="o">=</span><span class="n">module_name</span><span class="p">,</span>
        <span class="n">package_name</span><span class="o">=</span><span class="n">package_name</span><span class="p">,</span>
        <span class="n">pypi_package_name</span><span class="o">=</span><span class="n">pypi_package_name</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">func_iri</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="tripper.triplestore.Triplestore.add_mapsTo" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_mapsTo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">property_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cost</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">target_cost</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#tripper.triplestore.Triplestore.add_mapsTo" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Add 'mapsTo' relation to triplestore.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>target</code></td>
        <td><code>str</code></td>
        <td><p>IRI of target ontological concept.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>source</code></td>
        <td><code>str</code></td>
        <td><p>Source IRI (or entity object).</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>property_name</code></td>
        <td><code>&#39;Optional[str]&#39;</code></td>
        <td><p>Name of property if <code>source</code> is an entity or
an entity IRI.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>cost</code></td>
        <td><code>&#39;Optional[Union[float, Callable]]&#39;</code></td>
        <td><p>User-defined cost of following this mapping relation
represented as a float.  It may be given either as a
float or as a callable taking three arguments</p>
<div class="language-text highlight"><pre><span></span><code>cost(triplestore, input_iris, output_iri)
</code></pre></div>
<p>and returning the cost as a float.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>target_cost</code></td>
        <td><code>bool</code></td>
        <td><p>Whether the cost is assigned to mapping steps
that have <code>target</code> as output.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>      <div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is equivalent to the <code>map()</code> method, but reverts the
two first arguments and adds the <code>property_name</code> argument.</p>
</div>

        <details class="quote">
          <summary>Source code in <code>tripper/triplestore.py</code></summary>
          <div class="language-python highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_mapsTo</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">target</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">source</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">property_name</span><span class="p">:</span> <span class="s2">&quot;Optional[str]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">cost</span><span class="p">:</span> <span class="s2">&quot;Optional[Union[float, Callable]]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">target_cost</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add &#39;mapsTo&#39; relation to triplestore.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        target: IRI of target ontological concept.</span>
<span class="sd">        source: Source IRI (or entity object).</span>
<span class="sd">        property_name: Name of property if `source` is an entity or</span>
<span class="sd">            an entity IRI.</span>
<span class="sd">        cost: User-defined cost of following this mapping relation</span>
<span class="sd">            represented as a float.  It may be given either as a</span>
<span class="sd">            float or as a callable taking three arguments</span>

<span class="sd">                cost(triplestore, input_iris, output_iri)</span>

<span class="sd">            and returning the cost as a float.</span>
<span class="sd">        target_cost: Whether the cost is assigned to mapping steps</span>
<span class="sd">            that have `target` as output.</span>

<span class="sd">    Note:</span>
<span class="sd">        This is equivalent to the `map()` method, but reverts the</span>
<span class="sd">        two first arguments and adds the `property_name` argument.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;map&quot;</span><span class="p">,</span> <span class="n">MAP</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">property_name</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">TripperError</span><span class="p">(</span>
            <span class="s2">&quot;`property_name` is required when `target` is not a string.&quot;</span>
        <span class="p">)</span>

    <span class="n">target</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">expand_iri</span><span class="p">(</span><span class="n">target</span><span class="p">)</span>
    <span class="n">source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">expand_iri</span><span class="p">(</span><span class="n">infer_iri</span><span class="p">(</span><span class="n">source</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">property_name</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">source</span><span class="si">}</span><span class="s2">#</span><span class="si">{</span><span class="n">property_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">MAP</span><span class="o">.</span><span class="n">mapsTo</span><span class="p">,</span> <span class="n">target</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">source</span><span class="p">,</span> <span class="n">MAP</span><span class="o">.</span><span class="n">mapsTo</span><span class="p">,</span> <span class="n">target</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">cost</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">dest</span> <span class="o">=</span> <span class="n">target</span> <span class="k">if</span> <span class="n">target_cost</span> <span class="k">else</span> <span class="n">source</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_cost</span><span class="p">(</span><span class="n">cost</span><span class="p">,</span> <span class="n">dest</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="tripper.triplestore.Triplestore.add_restriction" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_restriction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">cls</span><span class="p">,</span> <span class="nb">property</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">cardinality</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">hashlength</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span></code>


<a href="#tripper.triplestore.Triplestore.add_restriction" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Add a restriction to a class in the triplestore.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>cls</code></td>
        <td><code>str</code></td>
        <td><p>IRI of class to which the restriction applies.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>property</code></td>
        <td><code>str</code></td>
        <td><p>IRI of restriction property.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>value</code></td>
        <td><code>&#39;Union[str, Literal]&#39;</code></td>
        <td><p>The IRI or literal value of the restriction target.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>type</code></td>
        <td><code>&#39;RestrictionType&#39;</code></td>
        <td><p>The type of the restriction.  Should be one of:
- some: existential restriction (value is a class IRI)
- only: universal restriction (value is a class IRI)
- exactly: cardinality restriction (value is a class IRI)
- min: minimum cardinality restriction (value is a class IRI)
- max: maximum cardinality restriction (value is a class IRI)
- value: Value restriction (value is an IRI of an individual
  or a literal)</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>cardinality</code></td>
        <td><code>&#39;Optional[int]&#39;</code></td>
        <td><p>the cardinality value for cardinality restrictions.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>hashlength</code></td>
        <td><code>int</code></td>
        <td><p>Number of bytes in the hash part of the bnode IRI.</p></td>
        <td><code>16</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The IRI of the created blank node representing the restriction.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>tripper/triplestore.py</code></summary>
          <div class="language-python highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_restriction</span><span class="p">(</span>  <span class="c1"># pylint: disable=redefined-builtin</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="bp">cls</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="nb">property</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">value</span><span class="p">:</span> <span class="s2">&quot;Union[str, Literal]&quot;</span><span class="p">,</span>
    <span class="nb">type</span><span class="p">:</span> <span class="s2">&quot;RestrictionType&quot;</span><span class="p">,</span>
    <span class="n">cardinality</span><span class="p">:</span> <span class="s2">&quot;Optional[int]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">hashlength</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add a restriction to a class in the triplestore.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        cls: IRI of class to which the restriction applies.</span>
<span class="sd">        property: IRI of restriction property.</span>
<span class="sd">        value: The IRI or literal value of the restriction target.</span>
<span class="sd">        type: The type of the restriction.  Should be one of:</span>
<span class="sd">            - some: existential restriction (value is a class IRI)</span>
<span class="sd">            - only: universal restriction (value is a class IRI)</span>
<span class="sd">            - exactly: cardinality restriction (value is a class IRI)</span>
<span class="sd">            - min: minimum cardinality restriction (value is a class IRI)</span>
<span class="sd">            - max: maximum cardinality restriction (value is a class IRI)</span>
<span class="sd">            - value: Value restriction (value is an IRI of an individual</span>
<span class="sd">              or a literal)</span>

<span class="sd">        cardinality: the cardinality value for cardinality restrictions.</span>
<span class="sd">        hashlength: Number of bytes in the hash part of the bnode IRI.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The IRI of the created blank node representing the restriction.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">iri</span> <span class="o">=</span> <span class="n">bnode_iri</span><span class="p">(</span>
        <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;restriction&quot;</span><span class="p">,</span>
        <span class="n">source</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">cls</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="nb">property</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">cardinality</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">length</span><span class="o">=</span><span class="n">hashlength</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">triples</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">RDFS</span><span class="o">.</span><span class="n">subClassOf</span><span class="p">,</span> <span class="n">iri</span><span class="p">),</span>
        <span class="p">(</span><span class="n">iri</span><span class="p">,</span> <span class="n">RDF</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">OWL</span><span class="o">.</span><span class="n">Restriction</span><span class="p">),</span>
        <span class="p">(</span><span class="n">iri</span><span class="p">,</span> <span class="n">OWL</span><span class="o">.</span><span class="n">onProperty</span><span class="p">,</span> <span class="nb">property</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="k">if</span> <span class="nb">type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_restriction_types</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ArgumentValueError</span><span class="p">(</span>
            <span class="s1">&#39;`type` must be one of: &quot;some&quot;, &quot;only&quot;, &quot;exactly&quot;, &quot;min&quot;, &#39;</span>
            <span class="s1">&#39;&quot;max&quot; or &quot;value&quot;&#39;</span>
        <span class="p">)</span>
    <span class="n">pred</span><span class="p">,</span> <span class="n">card</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_restriction_types</span><span class="p">[</span><span class="nb">type</span><span class="p">]</span>
    <span class="n">triples</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">iri</span><span class="p">,</span> <span class="n">pred</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">card</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">cardinality</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ArgumentTypeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;`cardinality` must be provided for type=&#39;</span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
            <span class="p">)</span>
        <span class="n">triples</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">(</span>
                <span class="n">iri</span><span class="p">,</span>
                <span class="n">card</span><span class="p">,</span>
                <span class="n">Literal</span><span class="p">(</span><span class="n">cardinality</span><span class="p">,</span> <span class="n">datatype</span><span class="o">=</span><span class="n">XSD</span><span class="o">.</span><span class="n">nonNegativeInteger</span><span class="p">),</span>
            <span class="p">),</span>
        <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_triples</span><span class="p">(</span><span class="n">triples</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">iri</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="tripper.triplestore.Triplestore.add_triples" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_triples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">triples</span><span class="p">)</span></code>


<a href="#tripper.triplestore.Triplestore.add_triples" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Add a sequence of triples.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>triples</code></td>
        <td><code>&#39;Iterable[Triple]&#39;</code></td>
        <td><p>A sequence of <code>(s, p, o)</code> tuples to add to the
triplestore.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>tripper/triplestore.py</code></summary>
          <div class="language-python highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_triples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">triples</span><span class="p">:</span> <span class="s2">&quot;Iterable[Triple]&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add a sequence of triples.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        triples: A sequence of `(s, p, o)` tuples to add to the</span>
<span class="sd">            triplestore.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">add_triples</span><span class="p">(</span><span class="n">triples</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="tripper.triplestore.Triplestore.available" class="doc doc-heading">
<code class="highlight language-python"><span class="n">available</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></code>


<a href="#tripper.triplestore.Triplestore.available" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Checks if the backend is available.</p>
<p>This is done by sending a request to the URL specified
in the <code>check_url</code> attribute and checking for the response.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>timeout</code></td>
        <td><code>float</code></td>
        <td><p>Total time in seconds to wait for a response.</p></td>
        <td><code>5</code></td>
      </tr>
  </tbody>
</table>      <div class="admonition interval">
<p class="admonition-title">Internal time interval in seconds between checking if the</p>
<p>service has responded.</p>
</div>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>Returns true if the service responds with code 200,
otherwise false is returned.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>tripper/triplestore.py</code></summary>
          <div class="language-python highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">available</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="n">interval</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks if the backend is available.</span>

<span class="sd">    This is done by sending a request to the URL specified</span>
<span class="sd">    in the `check_url` attribute and checking for the response.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        timeout: Total time in seconds to wait for a response.</span>
<span class="sd">    interval: Internal time interval in seconds between checking if the</span>
<span class="sd">        service has responded.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Returns true if the service responds with code 200,</span>
<span class="sd">        otherwise false is returned.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_url</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;`check_url` must be assigned before calling available()&quot;</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">check_service_availability</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_url</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="n">interval</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="tripper.triplestore.Triplestore.bind" class="doc doc-heading">
<code class="highlight language-python"><span class="n">bind</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#tripper.triplestore.Triplestore.bind" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Bind prefix to namespace and return the new Namespace object.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>prefix</code></td>
        <td><code>str</code></td>
        <td><p>Prefix to bind the the namespace.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>namespace</code></td>
        <td><code>&#39;Union[str, Namespace, Triplestore, None]&#39;</code></td>
        <td><p>Namespace to bind to.  The default is to bind to the
<code>base_iri</code> of the current triplestore.
If <code>namespace</code> is None, the corresponding prefix is removed.</p></td>
        <td><code>&#39;&#39;</code></td>
      </tr>
      <tr>
        <td><code>kwargs</code></td>
        <td></td>
        <td><p>Keyword arguments are passed to the Namespace()
constructor.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>&#39;Union[Namespace, None]&#39;</code></td>
      <td><p>New Namespace object or None if namespace is removed.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>tripper/triplestore.py</code></summary>
          <div class="language-python highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">bind</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">namespace</span><span class="p">:</span> <span class="s2">&quot;Union[str, Namespace, Triplestore, None]&quot;</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Union[Namespace, None]&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Bind prefix to namespace and return the new Namespace object.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        prefix: Prefix to bind the the namespace.</span>
<span class="sd">        namespace: Namespace to bind to.  The default is to bind to the</span>
<span class="sd">            `base_iri` of the current triplestore.</span>
<span class="sd">            If `namespace` is None, the corresponding prefix is removed.</span>
<span class="sd">        kwargs: Keyword arguments are passed to the Namespace()</span>
<span class="sd">            constructor.</span>

<span class="sd">    Returns:</span>
<span class="sd">        New Namespace object or None if namespace is removed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">namespace</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
        <span class="n">namespace</span> <span class="o">=</span> <span class="bp">self</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">namespace</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">ns</span> <span class="o">=</span> <span class="n">Namespace</span><span class="p">(</span><span class="n">namespace</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">namespace</span><span class="p">,</span> <span class="n">Triplestore</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">namespace</span><span class="o">.</span><span class="n">base_iri</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;triplestore object </span><span class="si">{</span><span class="n">namespace</span><span class="si">}</span><span class="s2"> has no `base_iri`&quot;</span>
            <span class="p">)</span>
        <span class="n">ns</span> <span class="o">=</span> <span class="n">Namespace</span><span class="p">(</span><span class="n">namespace</span><span class="o">.</span><span class="n">base_iri</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">namespace</span><span class="p">,</span> <span class="n">Namespace</span><span class="p">):</span>
        <span class="c1"># pylint: disable=protected-access</span>
        <span class="n">ns</span> <span class="o">=</span> <span class="n">Namespace</span><span class="p">(</span><span class="n">namespace</span><span class="o">.</span><span class="n">_iri</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">namespace</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">namespaces</span><span class="p">[</span><span class="n">prefix</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="p">,</span> <span class="s2">&quot;bind&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;invalid `namespace` type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">namespace</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="p">,</span> <span class="s2">&quot;bind&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span>
            <span class="n">prefix</span><span class="p">,</span> <span class="n">ns</span><span class="o">.</span><span class="n">_iri</span>  <span class="c1"># pylint: disable=protected-access</span>
        <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">namespaces</span><span class="p">[</span><span class="n">prefix</span><span class="p">]</span> <span class="o">=</span> <span class="n">ns</span>
    <span class="k">return</span> <span class="n">ns</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="tripper.triplestore.Triplestore.close" class="doc doc-heading">
<code class="highlight language-python"><span class="n">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#tripper.triplestore.Triplestore.close" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Calls the backend close() method if it is implemented.
Otherwise, this method has no effect.</p>

        <details class="quote">
          <summary>Source code in <code>tripper/triplestore.py</code></summary>
          <div class="language-python highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calls the backend close() method if it is implemented.</span>
<span class="sd">    Otherwise, this method has no effect.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># It should be ok to call close() regardless of whether the backend</span>
    <span class="c1"># implements this method or not.  Hence, don&#39;t call _check_method().</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">closed</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="p">,</span> <span class="s2">&quot;close&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">closed</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="tripper.triplestore.Triplestore.create_database" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_database</span><span class="p">(</span><span class="n">backend</span><span class="p">,</span> <span class="n">database</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#tripper.triplestore.Triplestore.create_database" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Create a new database in backend.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>backend</code></td>
        <td><code>str</code></td>
        <td><p>Name of backend.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>database</code></td>
        <td><code>str</code></td>
        <td><p>Name of the new database.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>kwargs</code></td>
        <td></td>
        <td><p>Keyword arguments passed to the backend
create_database() method.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>      <div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is a class method, which operates on the backend
triplestore without connecting to it.</p>
</div>

        <details class="quote">
          <summary>Source code in <code>tripper/triplestore.py</code></summary>
          <div class="language-python highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_database</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">backend</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">database</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a new database in backend.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        backend: Name of backend.</span>
<span class="sd">        database: Name of the new database.</span>
<span class="sd">        kwargs: Keyword arguments passed to the backend</span>
<span class="sd">            create_database() method.</span>

<span class="sd">    Note:</span>
<span class="sd">        This is a class method, which operates on the backend</span>
<span class="sd">        triplestore without connecting to it.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">cls</span><span class="o">.</span><span class="n">_check_backend_method</span><span class="p">(</span><span class="n">backend</span><span class="p">,</span> <span class="s2">&quot;create_database&quot;</span><span class="p">)</span>
    <span class="n">backend_class</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_get_backend</span><span class="p">(</span><span class="n">backend</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">backend_class</span><span class="o">.</span><span class="n">create_database</span><span class="p">(</span><span class="n">database</span><span class="o">=</span><span class="n">database</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="tripper.triplestore.Triplestore.eval_function" class="doc doc-heading">
<code class="highlight language-python"><span class="n">eval_function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func_iri</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(),</span> <span class="n">kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#tripper.triplestore.Triplestore.eval_function" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Evaluate mapping function and return the result.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>func_iri</code></td>
        <td></td>
        <td><p>IRI of the function to be evaluated.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>args</code></td>
        <td></td>
        <td><p>Sequence of positional arguments passed to the function.</p></td>
        <td><code>()</code></td>
      </tr>
      <tr>
        <td><code>kwargs</code></td>
        <td></td>
        <td><p>Mapping of keyword arguments passed to the function.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>&#39;Any&#39;</code></td>
      <td><p>The return value of the function.</p></td>
    </tr>
  </tbody>
</table>      <div class="admonition note">
<p class="admonition-title">Note</p>
<p>The current implementation does not protect against side
effect or malicious code.  Be warned!
This may be improved in the future.</p>
</div>

        <details class="quote">
          <summary>Source code in <code>tripper/triplestore.py</code></summary>
          <div class="language-python highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">eval_function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func_iri</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(),</span> <span class="n">kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Any&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Evaluate mapping function and return the result.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        func_iri: IRI of the function to be evaluated.</span>
<span class="sd">        args: Sequence of positional arguments passed to the function.</span>
<span class="sd">        kwargs: Mapping of keyword arguments passed to the function.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The return value of the function.</span>

<span class="sd">    Note:</span>
<span class="sd">        The current implementation does not protect against side</span>
<span class="sd">        effect or malicious code.  Be warned!</span>
<span class="sd">        This may be improved in the future.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_function</span><span class="p">(</span><span class="n">func_iri</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="c1"># FIXME: Add sandboxing</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="tripper.triplestore.Triplestore.expand_iri" class="doc doc-heading">
<code class="highlight language-python"><span class="n">expand_iri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iri</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#tripper.triplestore.Triplestore.expand_iri" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Return the full IRI if <code>iri</code> is prefixed.
Otherwise <code>iri</code> isreturned.</p>

<p><strong>Examples:</strong></p>
    
      <div class="language-python highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span><span class="w"> </span><span class="nn">tripper</span><span class="w"> </span><span class="kn">import</span> <span class="n">Triplestore</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">Triplestore</span><span class="p">(</span><span class="n">backend</span><span class="o">=</span><span class="s2">&quot;rdflib&quot;</span><span class="p">)</span>

<span class="c1"># Unknown prefix raises an exception</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ts</span><span class="o">.</span><span class="n">expand_iri</span><span class="p">(</span><span class="s2">&quot;ex:Concept&quot;</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># doctest: +ELLIPSIS</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
<span class="o">...</span>
<span class="n">tripper</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">NamespaceError</span><span class="p">:</span> <span class="n">Undefined</span> <span class="n">prefix</span> <span class="s2">&quot;ex&quot;</span> <span class="ow">in</span> <span class="n">IRI</span><span class="p">:</span> <span class="n">ex</span><span class="p">:</span><span class="n">Concept</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">EX</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;ex&quot;</span><span class="p">,</span> <span class="s2">&quot;http://example.com#&quot;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ts</span><span class="o">.</span><span class="n">expand_iri</span><span class="p">(</span><span class="s2">&quot;ex:Concept&quot;</span><span class="p">)</span>
<span class="s1">&#39;http://example.com#Concept&#39;</span>

<span class="c1"># Returns iri if it has no prefix</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ts</span><span class="o">.</span><span class="n">expand_iri</span><span class="p">(</span><span class="s2">&quot;http://example.com#Concept&quot;</span><span class="p">)</span>
<span class="s1">&#39;http://example.com#Concept&#39;</span>
</code></pre></div>

        <details class="quote">
          <summary>Source code in <code>tripper/triplestore.py</code></summary>
          <div class="language-python highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">expand_iri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iri</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">strict</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the full IRI if `iri` is prefixed.</span>
<span class="sd">    Otherwise `iri` isreturned.</span>

<span class="sd">    Examples:</span>

<span class="sd">    ```python</span>
<span class="sd">    &gt;&gt;&gt; from tripper import Triplestore</span>
<span class="sd">    &gt;&gt;&gt; ts = Triplestore(backend=&quot;rdflib&quot;)</span>

<span class="sd">    # Unknown prefix raises an exception</span>
<span class="sd">    &gt;&gt;&gt; ts.expand_iri(&quot;ex:Concept&quot;, strict=True)  # doctest: +ELLIPSIS</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">    ...</span>
<span class="sd">    tripper.errors.NamespaceError: Undefined prefix &quot;ex&quot; in IRI: ex:Concept</span>

<span class="sd">    &gt;&gt;&gt; EX = ts.bind(&quot;ex&quot;, &quot;http://example.com#&quot;)</span>
<span class="sd">    &gt;&gt;&gt; ts.expand_iri(&quot;ex:Concept&quot;)</span>
<span class="sd">    &#39;http://example.com#Concept&#39;</span>

<span class="sd">    # Returns iri if it has no prefix</span>
<span class="sd">    &gt;&gt;&gt; ts.expand_iri(&quot;http://example.com#Concept&quot;)</span>
<span class="sd">    &#39;http://example.com#Concept&#39;</span>

<span class="sd">    ```</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">expand_iri</span><span class="p">(</span><span class="n">iri</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">namespaces</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="n">strict</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="tripper.triplestore.Triplestore.has" class="doc doc-heading">
<code class="highlight language-python"><span class="n">has</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">object</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#tripper.triplestore.Triplestore.has" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Returns true if the triplestore has any triple matching
the give subject, predicate and/or object.</p>

        <details class="quote">
          <summary>Source code in <code>tripper/triplestore.py</code></summary>
          <div class="language-python highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">has</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">object</span><span class="o">=</span><span class="kc">None</span>
<span class="p">):</span>  <span class="c1"># pylint: disable=redefined-builtin</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns true if the triplestore has any triple matching</span>
<span class="sd">    the give subject, predicate and/or object.&quot;&quot;&quot;</span>
    <span class="n">triple</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">triples</span><span class="p">(</span>
        <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="n">predicate</span><span class="p">,</span> <span class="nb">object</span><span class="o">=</span><span class="nb">object</span>
    <span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="nb">next</span><span class="p">(</span><span class="n">triple</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="tripper.triplestore.Triplestore.list_databases" class="doc doc-heading">
<code class="highlight language-python"><span class="n">list_databases</span><span class="p">(</span><span class="n">backend</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#tripper.triplestore.Triplestore.list_databases" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>For backends that supports multiple databases, list of all
databases.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>backend</code></td>
        <td><code>str</code></td>
        <td><p>Name of backend.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>kwargs</code></td>
        <td></td>
        <td><p>Keyword arguments passed to the backend
list_databases() method.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>      <div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is a class method, which operates on the backend
triplestore without connecting to it.</p>
</div>

        <details class="quote">
          <summary>Source code in <code>tripper/triplestore.py</code></summary>
          <div class="language-python highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_databases</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">backend</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;For backends that supports multiple databases, list of all</span>
<span class="sd">    databases.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        backend: Name of backend.</span>
<span class="sd">        kwargs: Keyword arguments passed to the backend</span>
<span class="sd">            list_databases() method.</span>

<span class="sd">    Note:</span>
<span class="sd">        This is a class method, which operates on the backend</span>
<span class="sd">        triplestore without connecting to it.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">cls</span><span class="o">.</span><span class="n">_check_backend_method</span><span class="p">(</span><span class="n">backend</span><span class="p">,</span> <span class="s2">&quot;list_databases&quot;</span><span class="p">)</span>
    <span class="n">backend_class</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_get_backend</span><span class="p">(</span><span class="n">backend</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">backend_class</span><span class="o">.</span><span class="n">list_databases</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="tripper.triplestore.Triplestore.map" class="doc doc-heading">
<code class="highlight language-python"><span class="nb">map</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">cost</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">target_cost</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#tripper.triplestore.Triplestore.map" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Add 'mapsTo' relation to the triplestore.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>source</code></td>
        <td><code>str</code></td>
        <td><p>Source IRI.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>target</code></td>
        <td><code>str</code></td>
        <td><p>IRI of target ontological concept.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>cost</code></td>
        <td><code>&#39;Optional[Union[float, Callable]]&#39;</code></td>
        <td><p>User-defined cost of following this mapping relation
represented as a float.  It may be given either as a
float or as a callable taking three arguments</p>
<div class="language-text highlight"><pre><span></span><code>cost(triplestore, input_iris, output_iri)
</code></pre></div>
<p>and returning the cost as a float.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>target_cost</code></td>
        <td><code>bool</code></td>
        <td><p>Whether the cost is assigned to mapping steps
that have <code>target</code> as output.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>tripper/triplestore.py</code></summary>
          <div class="language-python highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">map</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">source</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">target</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">cost</span><span class="p">:</span> <span class="s2">&quot;Optional[Union[float, Callable]]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">target_cost</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add &#39;mapsTo&#39; relation to the triplestore.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        source: Source IRI.</span>
<span class="sd">        target: IRI of target ontological concept.</span>
<span class="sd">        cost: User-defined cost of following this mapping relation</span>
<span class="sd">            represented as a float.  It may be given either as a</span>
<span class="sd">            float or as a callable taking three arguments</span>

<span class="sd">                cost(triplestore, input_iris, output_iri)</span>

<span class="sd">            and returning the cost as a float.</span>
<span class="sd">        target_cost: Whether the cost is assigned to mapping steps</span>
<span class="sd">            that have `target` as output.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_mapsTo</span><span class="p">(</span>
        <span class="n">target</span><span class="o">=</span><span class="n">target</span><span class="p">,</span>
        <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span>
        <span class="n">cost</span><span class="o">=</span><span class="n">cost</span><span class="p">,</span>
        <span class="n">target_cost</span><span class="o">=</span><span class="n">target_cost</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="tripper.triplestore.Triplestore.objects" class="doc doc-heading">
<code class="highlight language-python"><span class="n">objects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#tripper.triplestore.Triplestore.objects" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Returns a generator of objects for given subject and predicate.</p>

        <details class="quote">
          <summary>Source code in <code>tripper/triplestore.py</code></summary>
          <div class="language-python highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">objects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a generator of objects for given subject and predicate.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">triples</span><span class="p">(</span><span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="n">predicate</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">o</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="tripper.triplestore.Triplestore.parse" class="doc doc-heading">
<code class="highlight language-python"><span class="n">parse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fallback_backend</span><span class="o">=</span><span class="s1">&#39;rdflib&#39;</span><span class="p">,</span> <span class="n">fallback_backend_kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#tripper.triplestore.Triplestore.parse" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Parse source and add the resulting triples to triplestore.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>source</code></td>
        <td></td>
        <td><p>File-like object. File name or URL.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>format</code></td>
        <td></td>
        <td><p>Needed if format can not be inferred from source.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fallback_backend</code></td>
        <td></td>
        <td><p>If the current backend doesn't implement
parse, use the <code>fallback_backend</code> instead.</p></td>
        <td><code>&#39;rdflib&#39;</code></td>
      </tr>
      <tr>
        <td><code>fallback_backend_kwargs</code></td>
        <td></td>
        <td><p>Dict with additional keyword arguments
for initialising <code>fallback_backend</code>.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>kwargs</code></td>
        <td></td>
        <td><p>Keyword arguments passed to the backend.
The rdflib backend supports e.g. <code>location</code> (absolute
or relative URL) and <code>data</code> (string containing the
data to be parsed) arguments.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>tripper/triplestore.py</code></summary>
          <div class="language-python highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">parse</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">source</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="nb">format</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fallback_backend</span><span class="o">=</span><span class="s2">&quot;rdflib&quot;</span><span class="p">,</span>
    <span class="n">fallback_backend_kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>  <span class="c1"># pylint: disable=redefined-builtin</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parse source and add the resulting triples to triplestore.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        source: File-like object. File name or URL.</span>
<span class="sd">        format: Needed if format can not be inferred from source.</span>
<span class="sd">        fallback_backend: If the current backend doesn&#39;t implement</span>
<span class="sd">            parse, use the `fallback_backend` instead.</span>
<span class="sd">        fallback_backend_kwargs: Dict with additional keyword arguments</span>
<span class="sd">            for initialising `fallback_backend`.</span>
<span class="sd">        kwargs: Keyword arguments passed to the backend.</span>
<span class="sd">            The rdflib backend supports e.g. `location` (absolute</span>
<span class="sd">            or relative URL) and `data` (string containing the</span>
<span class="sd">            data to be parsed) arguments.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="p">,</span> <span class="s2">&quot;parse&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_method</span><span class="p">(</span><span class="s2">&quot;parse&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">fallback_backend_kwargs</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">fallback_backend_kwargs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">ts</span> <span class="o">=</span> <span class="n">Triplestore</span><span class="p">(</span>
            <span class="n">backend</span><span class="o">=</span><span class="n">fallback_backend</span><span class="p">,</span> <span class="o">**</span><span class="n">fallback_backend_kwargs</span>
        <span class="p">)</span>
        <span class="n">ts</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_triples</span><span class="p">(</span><span class="n">ts</span><span class="o">.</span><span class="n">triples</span><span class="p">())</span>

    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="p">,</span> <span class="s2">&quot;namespaces&quot;</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">namespace</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">namespaces</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">prefix</span> <span class="ow">and</span> <span class="n">prefix</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">namespaces</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">namespaces</span><span class="p">[</span><span class="n">prefix</span><span class="p">]</span> <span class="o">=</span> <span class="n">Namespace</span><span class="p">(</span><span class="n">namespace</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="tripper.triplestore.Triplestore.predicate_objects" class="doc doc-heading">
<code class="highlight language-python"><span class="n">predicate_objects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#tripper.triplestore.Triplestore.predicate_objects" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Returns a generator of (predicate, object) tuples for given
subject.</p>

        <details class="quote">
          <summary>Source code in <code>tripper/triplestore.py</code></summary>
          <div class="language-python highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">predicate_objects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a generator of (predicate, object) tuples for given</span>
<span class="sd">    subject.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">triples</span><span class="p">(</span><span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="tripper.triplestore.Triplestore.predicates" class="doc doc-heading">
<code class="highlight language-python"><span class="n">predicates</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">object</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#tripper.triplestore.Triplestore.predicates" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Returns a generator of predicates for given subject and object.</p>

        <details class="quote">
          <summary>Source code in <code>tripper/triplestore.py</code></summary>
          <div class="language-python highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">predicates</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">object</span><span class="o">=</span><span class="kc">None</span>  <span class="c1"># pylint: disable=redefined-builtin</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a generator of predicates for given subject and object.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">triples</span><span class="p">(</span><span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span> <span class="nb">object</span><span class="o">=</span><span class="nb">object</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">p</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="tripper.triplestore.Triplestore.prefix_iri" class="doc doc-heading">
<code class="highlight language-python"><span class="n">prefix_iri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iri</span><span class="p">,</span> <span class="n">require_prefixed</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#tripper.triplestore.Triplestore.prefix_iri" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Return prefixed IRI.</p>
<p>This is the reverse of expand_iri().</p>
<p>If <code>require_prefixed</code> is true, a NamespaceError exception is raised
if no prefix can be found.</p>

<p><strong>Examples:</strong></p>
    
      <div class="language-python highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span><span class="w"> </span><span class="nn">tripper</span><span class="w"> </span><span class="kn">import</span> <span class="n">Triplestore</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">Triplestore</span><span class="p">(</span><span class="n">backend</span><span class="o">=</span><span class="s2">&quot;rdflib&quot;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ts</span><span class="o">.</span><span class="n">prefix_iri</span><span class="p">(</span><span class="s2">&quot;http://example.com#Concept&quot;</span><span class="p">)</span>
<span class="s1">&#39;http://example.com#Concept&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">ts</span><span class="o">.</span><span class="n">prefix_iri</span><span class="p">(</span>
<span class="o">...</span>     <span class="s2">&quot;http://example.com#Concept&quot;</span><span class="p">,</span> <span class="n">require_prefixed</span><span class="o">=</span><span class="kc">True</span>
<span class="o">...</span> <span class="p">)</span>  <span class="c1"># doctest: +ELLIPSIS</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
<span class="o">...</span>
<span class="n">tripper</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">NamespaceError</span><span class="p">:</span> <span class="n">No</span> <span class="n">prefix</span> <span class="n">defined</span> <span class="k">for</span> <span class="n">IRI</span><span class="p">:</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="c1">#Concept</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">EX</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;ex&quot;</span><span class="p">,</span> <span class="s2">&quot;http://example.com#&quot;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ts</span><span class="o">.</span><span class="n">prefix_iri</span><span class="p">(</span><span class="s2">&quot;http://example.com#Concept&quot;</span><span class="p">)</span>
<span class="s1">&#39;ex:Concept&#39;</span>
</code></pre></div>

        <details class="quote">
          <summary>Source code in <code>tripper/triplestore.py</code></summary>
          <div class="language-python highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">prefix_iri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iri</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">require_prefixed</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
    <span class="c1"># pylint: disable=line-too-long</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return prefixed IRI.</span>

<span class="sd">    This is the reverse of expand_iri().</span>

<span class="sd">    If `require_prefixed` is true, a NamespaceError exception is raised</span>
<span class="sd">    if no prefix can be found.</span>

<span class="sd">    Examples:</span>

<span class="sd">    ```python</span>
<span class="sd">    &gt;&gt;&gt; from tripper import Triplestore</span>
<span class="sd">    &gt;&gt;&gt; ts = Triplestore(backend=&quot;rdflib&quot;)</span>
<span class="sd">    &gt;&gt;&gt; ts.prefix_iri(&quot;http://example.com#Concept&quot;)</span>
<span class="sd">    &#39;http://example.com#Concept&#39;</span>

<span class="sd">    &gt;&gt;&gt; ts.prefix_iri(</span>
<span class="sd">    ...     &quot;http://example.com#Concept&quot;, require_prefixed=True</span>
<span class="sd">    ... )  # doctest: +ELLIPSIS</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">    ...</span>
<span class="sd">    tripper.errors.NamespaceError: No prefix defined for IRI: http://example.com#Concept</span>

<span class="sd">    &gt;&gt;&gt; EX = ts.bind(&quot;ex&quot;, &quot;http://example.com#&quot;)</span>
<span class="sd">    &gt;&gt;&gt; ts.prefix_iri(&quot;http://example.com#Concept&quot;)</span>
<span class="sd">    &#39;ex:Concept&#39;</span>

<span class="sd">    ```</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">prefix_iri</span><span class="p">(</span><span class="n">iri</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">namespaces</span><span class="p">,</span> <span class="n">require_prefixed</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="tripper.triplestore.Triplestore.query" class="doc doc-heading">
<code class="highlight language-python"><span class="n">query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">iris</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">literals</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#tripper.triplestore.Triplestore.query" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>SPARQL query.</p>
<p>The <code>query</code> argument may contain variables for IRIs and literals,
to be substituted using the <code>iris</code> and <code>literals</code> arguments. These
variables are prefixed <code>$</code>. This makes them easy to distinguish from
query variables, that are typically prefixed with <code>?</code>.</p>
<p>The query substitutions may be useful when the query is constructed
from user input, since they are properly escaped and will be inserted
in the query as a single token.  This may prevent sparql injection
attacks.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>query</code></td>
        <td><code>str</code></td>
        <td><p>String with the SPARQL query.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>iris</code></td>
        <td><code>&#39;Optional[dict]&#39;</code></td>
        <td><p>Dict used for query substitutions that maps IRI variables
to IRIs. The IRIs may be provided as fully expanded or
prefixed with a prefix registered in the triplestore namespace.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>literals</code></td>
        <td><code>&#39;Optional[dict]&#39;</code></td>
        <td><p>Dict used for query substitutions that maps literal
variables to literals.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>kwargs</code></td>
        <td></td>
        <td><p>Keyword arguments passed to the backend query() method.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>The return type depends on type of query</code></td>
      <td><ul>
<li>SELECT: list of tuples of IRIs for each matching row</li>
<li>ASK: bool</li>
<li>CONSTRUCT, DESCRIBE: generator over triples</li>
</ul></td>
    </tr>
  </tbody>
</table>      <div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method is intended for SELECT, ASK, CONSTRUCT and
DESCRIBE queries.  Use the update() method for INSERT and
DELETE queries.</p>
<p>Not all backends may support all types of queries.</p>
</div>

<p><strong>Examples:</strong></p>
    <p>Query for everyone with the name "John Dow":</p>
    <div class="language-python highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span><span class="w"> </span><span class="nn">tripper</span><span class="w"> </span><span class="kn">import</span> <span class="n">FOAF</span><span class="p">,</span> <span class="n">Literal</span><span class="p">,</span> <span class="n">Triplestore</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">Triplestore</span><span class="p">(</span><span class="n">backend</span><span class="o">=</span><span class="s2">&quot;rdflib&quot;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ts</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;foaf&quot;</span><span class="p">,</span> <span class="n">FOAF</span><span class="p">)</span>
<span class="n">Namespace</span><span class="p">(</span><span class="s1">&#39;http://xmlns.com/foaf/0.1/&#39;</span><span class="p">)</span>
</code></pre></div>
    <div class="language-python highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">ts</span><span class="o">.</span><span class="n">add_triples</span><span class="p">([</span>
<span class="o">...</span>     <span class="p">(</span><span class="s2">&quot;:john&quot;</span><span class="p">,</span> <span class="n">FOAF</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">Literal</span><span class="p">(</span><span class="s2">&quot;John Dow&quot;</span><span class="p">)),</span>
<span class="o">...</span>     <span class="p">(</span><span class="s2">&quot;:jack&quot;</span><span class="p">,</span> <span class="n">FOAF</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">Literal</span><span class="p">(</span><span class="s2">&quot;Jack Hudson&quot;</span><span class="p">)),</span>
<span class="o">...</span> <span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ts</span><span class="o">.</span><span class="n">query</span><span class="p">(</span>
<span class="o">...</span>     <span class="s2">&quot;SELECT ?s WHERE { ?s $name $obj .}&quot;</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">iris</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;foaf:name&quot;</span><span class="p">},</span>
<span class="o">...</span>     <span class="n">literals</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;obj&quot;</span><span class="p">:</span> <span class="s2">&quot;John Dow&quot;</span><span class="p">},</span>
<span class="o">...</span> <span class="p">)</span>
<span class="p">[(</span><span class="s1">&#39;:john&#39;</span><span class="p">,)]</span>
</code></pre></div>

        <details class="quote">
          <summary>Source code in <code>tripper/triplestore.py</code></summary>
          <div class="language-python highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">query</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">iris</span><span class="p">:</span> <span class="s2">&quot;Optional[dict]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">literals</span><span class="p">:</span> <span class="s2">&quot;Optional[dict]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Any&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;SPARQL query.</span>

<span class="sd">    The `query` argument may contain variables for IRIs and literals,</span>
<span class="sd">    to be substituted using the `iris` and `literals` arguments. These</span>
<span class="sd">    variables are prefixed `$`. This makes them easy to distinguish from</span>
<span class="sd">    query variables, that are typically prefixed with `?`.</span>

<span class="sd">    The query substitutions may be useful when the query is constructed</span>
<span class="sd">    from user input, since they are properly escaped and will be inserted</span>
<span class="sd">    in the query as a single token.  This may prevent sparql injection</span>
<span class="sd">    attacks.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        query: String with the SPARQL query.</span>
<span class="sd">        iris: Dict used for query substitutions that maps IRI variables</span>
<span class="sd">            to IRIs. The IRIs may be provided as fully expanded or</span>
<span class="sd">            prefixed with a prefix registered in the triplestore namespace.</span>
<span class="sd">        literals: Dict used for query substitutions that maps literal</span>
<span class="sd">            variables to literals.</span>
<span class="sd">        kwargs: Keyword arguments passed to the backend query() method.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The return type depends on type of query:</span>
<span class="sd">          - SELECT: list of tuples of IRIs for each matching row</span>
<span class="sd">          - ASK: bool</span>
<span class="sd">          - CONSTRUCT, DESCRIBE: generator over triples</span>

<span class="sd">    Note:</span>
<span class="sd">        This method is intended for SELECT, ASK, CONSTRUCT and</span>
<span class="sd">        DESCRIBE queries.  Use the update() method for INSERT and</span>
<span class="sd">        DELETE queries.</span>

<span class="sd">        Not all backends may support all types of queries.</span>

<span class="sd">    Examples:</span>
<span class="sd">        Query for everyone with the name &quot;John Dow&quot;:</span>

<span class="sd">        &gt;&gt;&gt; from tripper import FOAF, Literal, Triplestore</span>
<span class="sd">        &gt;&gt;&gt; ts = Triplestore(backend=&quot;rdflib&quot;)</span>
<span class="sd">        &gt;&gt;&gt; ts.bind(&quot;foaf&quot;, FOAF)</span>
<span class="sd">        Namespace(&#39;http://xmlns.com/foaf/0.1/&#39;)</span>

<span class="sd">        &gt;&gt;&gt; ts.add_triples([</span>
<span class="sd">        ...     (&quot;:john&quot;, FOAF.name, Literal(&quot;John Dow&quot;)),</span>
<span class="sd">        ...     (&quot;:jack&quot;, FOAF.name, Literal(&quot;Jack Hudson&quot;)),</span>
<span class="sd">        ... ])</span>
<span class="sd">        &gt;&gt;&gt; ts.query(</span>
<span class="sd">        ...     &quot;SELECT ?s WHERE { ?s $name $obj .}&quot;,</span>
<span class="sd">        ...     iris={&quot;name&quot;: &quot;foaf:name&quot;},</span>
<span class="sd">        ...     literals={&quot;obj&quot;: &quot;John Dow&quot;},</span>
<span class="sd">        ... )</span>
<span class="sd">        [(&#39;:john&#39;,)]</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_method</span><span class="p">(</span><span class="s2">&quot;query&quot;</span><span class="p">)</span>
    <span class="n">new_query</span> <span class="o">=</span> <span class="n">substitute_query</span><span class="p">(</span>
        <span class="n">query</span><span class="p">,</span> <span class="n">iris</span><span class="o">=</span><span class="n">iris</span><span class="p">,</span> <span class="n">literals</span><span class="o">=</span><span class="n">literals</span><span class="p">,</span> <span class="n">prefixes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">namespaces</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">new_query</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="tripper.triplestore.Triplestore.remove" class="doc doc-heading">
<code class="highlight language-python"><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">object</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">triple</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#tripper.triplestore.Triplestore.remove" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Remove all matching triples from the backend.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>subject</code></td>
        <td><code>&#39;Optional[Union[str, Triple]]&#39;</code></td>
        <td><p>If given, match triples with this subject.
For backward compatibility <code>subject</code> may also be an
<code>(s, p, o)</code> triple.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>predicate</code></td>
        <td><code>&#39;Optional[str]&#39;</code></td>
        <td><p>If given, match triples with this predicate.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>object</code></td>
        <td><code>&#39;Optional[Union[str, Literal]]&#39;</code></td>
        <td><p>If given, match triples with this object.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>triple</code></td>
        <td><code>&#39;Optional[Triple]&#39;</code></td>
        <td><p>Deprecated. A <code>(s, p, o)</code> tuple where <code>s</code>, <code>p</code> and <code>o</code>
should either be None (matching anything) or an exact IRI
to match.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>tripper/triplestore.py</code></summary>
          <div class="language-python highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">remove</span><span class="p">(</span>  <span class="c1"># pylint: disable=redefined-builtin</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">subject</span><span class="p">:</span> <span class="s2">&quot;Optional[Union[str, Triple]]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">predicate</span><span class="p">:</span> <span class="s2">&quot;Optional[str]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="nb">object</span><span class="p">:</span> <span class="s2">&quot;Optional[Union[str, Literal]]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">triple</span><span class="p">:</span> <span class="s2">&quot;Optional[Triple]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Remove all matching triples from the backend.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        subject: If given, match triples with this subject.</span>
<span class="sd">            For backward compatibility `subject` may also be an</span>
<span class="sd">            `(s, p, o)` triple.</span>
<span class="sd">        predicate: If given, match triples with this predicate.</span>
<span class="sd">        object: If given, match triples with this object.</span>
<span class="sd">        triple: Deprecated. A `(s, p, o)` tuple where `s`, `p` and `o`</span>
<span class="sd">            should either be None (matching anything) or an exact IRI</span>
<span class="sd">            to match.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># __TODO__: Remove these lines when deprecated</span>
    <span class="k">if</span> <span class="n">triple</span> <span class="ow">or</span> <span class="p">(</span><span class="n">subject</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="nb">str</span><span class="p">)):</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="s2">&quot;The `triple` argument is deprecated.  Use `subject`, &quot;</span>
            <span class="s2">&quot;`predicate` and `object` arguments instead.&quot;</span><span class="p">,</span>
            <span class="ne">DeprecationWarning</span><span class="p">,</span>
            <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="n">subject</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">subject</span><span class="p">,</span> <span class="n">predicate</span><span class="p">,</span> <span class="nb">object</span> <span class="o">=</span> <span class="n">subject</span>
    <span class="k">elif</span> <span class="n">triple</span><span class="p">:</span>
        <span class="n">subject</span><span class="p">,</span> <span class="n">predicate</span><span class="p">,</span> <span class="nb">object</span> <span class="o">=</span> <span class="n">triple</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">remove</span><span class="p">((</span><span class="n">subject</span><span class="p">,</span> <span class="n">predicate</span><span class="p">,</span> <span class="nb">object</span><span class="p">))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="tripper.triplestore.Triplestore.remove_database" class="doc doc-heading">
<code class="highlight language-python"><span class="n">remove_database</span><span class="p">(</span><span class="n">backend</span><span class="p">,</span> <span class="n">database</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#tripper.triplestore.Triplestore.remove_database" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Remove a database in backend.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>backend</code></td>
        <td><code>str</code></td>
        <td><p>Name of backend.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>database</code></td>
        <td><code>str</code></td>
        <td><p>Name of the database to be removed.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>kwargs</code></td>
        <td></td>
        <td><p>Keyword arguments passed to the backend
remove_database() method.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>      <div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is a class method, which operates on the backend
triplestore without connecting to it.</p>
</div>

        <details class="quote">
          <summary>Source code in <code>tripper/triplestore.py</code></summary>
          <div class="language-python highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">remove_database</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">backend</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">database</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Remove a database in backend.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        backend: Name of backend.</span>
<span class="sd">        database: Name of the database to be removed.</span>
<span class="sd">        kwargs: Keyword arguments passed to the backend</span>
<span class="sd">            remove_database() method.</span>

<span class="sd">    Note:</span>
<span class="sd">        This is a class method, which operates on the backend</span>
<span class="sd">        triplestore without connecting to it.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">cls</span><span class="o">.</span><span class="n">_check_backend_method</span><span class="p">(</span><span class="n">backend</span><span class="p">,</span> <span class="s2">&quot;remove_database&quot;</span><span class="p">)</span>
    <span class="n">backend_class</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_get_backend</span><span class="p">(</span><span class="n">backend</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">backend_class</span><span class="o">.</span><span class="n">remove_database</span><span class="p">(</span><span class="n">database</span><span class="o">=</span><span class="n">database</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="tripper.triplestore.Triplestore.restrictions" class="doc doc-heading">
<code class="highlight language-python"><span class="n">restrictions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">property</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cardinality</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">asdict</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#tripper.triplestore.Triplestore.restrictions" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Returns a generator over matching restrictions.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>cls</code></td>
        <td><code>&#39;Optional[str]&#39;</code></td>
        <td><p>IRI of class to which the restriction applies.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>property</code></td>
        <td><code>&#39;Optional[str]&#39;</code></td>
        <td><p>IRI of restriction property.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>value</code></td>
        <td><code>&#39;Optional[Union[str, Literal]]&#39;</code></td>
        <td><p>The IRI or literal value of the restriction target.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>type</code></td>
        <td><code>&#39;Optional[RestrictionType]&#39;</code></td>
        <td><p>The type of the restriction.  Should be one of:
- some: existential restriction (value is a class IRI)
- only: universal restriction (value is a class IRI)
- exactly: cardinality restriction (value is a class IRI)
- min: minimum cardinality restriction (value is a class IRI)
- max: maximum cardinality restriction (value is a class IRI)
- value: Value restriction (value is an IRI of an individual
  or a literal)</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>cardinality</code></td>
        <td><code>&#39;Optional[int]&#39;</code></td>
        <td><p>the cardinality value for cardinality restrictions.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>asdict</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to returned generator is over dicts (see
_get_restriction_dict()). Default is to return a generator
over blank node IRIs.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>&#39;Generator[dict, None, None]&#39;</code></td>
      <td><p>A generator over matching restrictions.  See <code>asdict</code> argument
for types iterated over.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>tripper/triplestore.py</code></summary>
          <div class="language-python highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">restrictions</span><span class="p">(</span>  <span class="c1"># pylint: disable=redefined-builtin</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="bp">cls</span><span class="p">:</span> <span class="s2">&quot;Optional[str]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="nb">property</span><span class="p">:</span> <span class="s2">&quot;Optional[str]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">value</span><span class="p">:</span> <span class="s2">&quot;Optional[Union[str, Literal]]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="nb">type</span><span class="p">:</span> <span class="s2">&quot;Optional[RestrictionType]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">cardinality</span><span class="p">:</span> <span class="s2">&quot;Optional[int]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">asdict</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Generator[dict, None, None]&quot;</span><span class="p">:</span>
    <span class="c1"># pylint: disable=too-many-boolean-expressions</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a generator over matching restrictions.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        cls: IRI of class to which the restriction applies.</span>
<span class="sd">        property: IRI of restriction property.</span>
<span class="sd">        value: The IRI or literal value of the restriction target.</span>
<span class="sd">        type: The type of the restriction.  Should be one of:</span>
<span class="sd">            - some: existential restriction (value is a class IRI)</span>
<span class="sd">            - only: universal restriction (value is a class IRI)</span>
<span class="sd">            - exactly: cardinality restriction (value is a class IRI)</span>
<span class="sd">            - min: minimum cardinality restriction (value is a class IRI)</span>
<span class="sd">            - max: maximum cardinality restriction (value is a class IRI)</span>
<span class="sd">            - value: Value restriction (value is an IRI of an individual</span>
<span class="sd">              or a literal)</span>

<span class="sd">        cardinality: the cardinality value for cardinality restrictions.</span>
<span class="sd">        asdict: Whether to returned generator is over dicts (see</span>
<span class="sd">            _get_restriction_dict()). Default is to return a generator</span>
<span class="sd">            over blank node IRIs.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A generator over matching restrictions.  See `asdict` argument</span>
<span class="sd">        for types iterated over.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">types</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_restriction_types</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="k">elif</span> <span class="nb">type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_restriction_types</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ArgumentValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Invalid `type=&#39;</span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2">&#39;`, it must be one of: &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_restriction_types</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">types</span> <span class="o">=</span> <span class="p">{</span><span class="nb">type</span><span class="p">}</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">type</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="nb">set</span><span class="p">(</span><span class="nb">type</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Literal</span><span class="p">):</span>
        <span class="n">types</span><span class="o">.</span><span class="n">intersection_update</span><span class="p">({</span><span class="s2">&quot;value&quot;</span><span class="p">})</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">types</span><span class="o">.</span><span class="n">difference_update</span><span class="p">({</span><span class="s2">&quot;value&quot;</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">cardinality</span><span class="p">:</span>
        <span class="n">types</span><span class="o">.</span><span class="n">intersection_update</span><span class="p">({</span><span class="s2">&quot;exactly&quot;</span><span class="p">,</span> <span class="s2">&quot;min&quot;</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">})</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">types</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ArgumentValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Inconsistent type=&#39;</span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2">&#39;, value=&#39;</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&#39; and &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;cardinality=&#39;</span><span class="si">{</span><span class="n">cardinality</span><span class="si">}</span><span class="s2">&#39; arguments&quot;</span>
        <span class="p">)</span>
    <span class="n">pred</span> <span class="o">=</span> <span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_restriction_types</span><span class="p">[</span><span class="n">t</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">types</span><span class="p">}</span>
    <span class="n">card</span> <span class="o">=</span> <span class="p">{</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_restriction_types</span><span class="p">[</span><span class="n">t</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">types</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_restriction_types</span><span class="p">[</span><span class="n">t</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">cardinality</span><span class="p">:</span>
        <span class="n">lcard</span> <span class="o">=</span> <span class="n">Literal</span><span class="p">(</span><span class="n">cardinality</span><span class="p">,</span> <span class="n">datatype</span><span class="o">=</span><span class="n">XSD</span><span class="o">.</span><span class="n">nonNegativeInteger</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">iri</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">subjects</span><span class="p">(</span><span class="n">predicate</span><span class="o">=</span><span class="n">OWL</span><span class="o">.</span><span class="n">onProperty</span><span class="p">,</span> <span class="nb">object</span><span class="o">=</span><span class="nb">property</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">has</span><span class="p">(</span><span class="n">iri</span><span class="p">,</span> <span class="n">RDF</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">OWL</span><span class="o">.</span><span class="n">Restriction</span><span class="p">)</span>
            <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">cls</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">has</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">RDFS</span><span class="o">.</span><span class="n">subClassOf</span><span class="p">,</span> <span class="n">iri</span><span class="p">))</span>
            <span class="ow">and</span> <span class="nb">any</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">has</span><span class="p">(</span><span class="n">iri</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pred</span><span class="p">)</span>
            <span class="ow">and</span> <span class="p">(</span>
                <span class="ow">not</span> <span class="n">card</span>
                <span class="ow">or</span> <span class="ow">not</span> <span class="n">cardinality</span>
                <span class="ow">or</span> <span class="nb">any</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">has</span><span class="p">(</span><span class="n">iri</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">lcard</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">card</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="p">):</span>
            <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_restriction_dict</span><span class="p">(</span><span class="n">iri</span><span class="p">)</span> <span class="k">if</span> <span class="n">asdict</span> <span class="k">else</span> <span class="n">iri</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="tripper.triplestore.Triplestore.serialize" class="doc doc-heading">
<code class="highlight language-python"><span class="n">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">destination</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;turtle&#39;</span><span class="p">,</span> <span class="n">fallback_backend</span><span class="o">=</span><span class="s1">&#39;rdflib&#39;</span><span class="p">,</span> <span class="n">fallback_backend_kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#tripper.triplestore.Triplestore.serialize" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Serialise triplestore.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>destination</code></td>
        <td></td>
        <td><p>File name or object to write to.  If None, the
serialisation is returned.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>format</code></td>
        <td></td>
        <td><p>Format to serialise as.  Supported formats, depends on
the backend.</p></td>
        <td><code>&#39;turtle&#39;</code></td>
      </tr>
      <tr>
        <td><code>fallback_backend</code></td>
        <td></td>
        <td><p>If the current backend doesn't implement
serialisation, use the <code>fallback_backend</code> instead.</p></td>
        <td><code>&#39;rdflib&#39;</code></td>
      </tr>
      <tr>
        <td><code>fallback_backend_kwargs</code></td>
        <td></td>
        <td><p>Dict with additional keyword arguments
for initialising <code>fallback_backend</code>.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>kwargs</code></td>
        <td></td>
        <td><p>Passed to the backend serialize() method.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>&#39;Union[None, str]&#39;</code></td>
      <td><p>Serialized string if <code>destination</code> is None.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>tripper/triplestore.py</code></summary>
          <div class="language-python highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">serialize</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">destination</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;turtle&quot;</span><span class="p">,</span>  <span class="c1"># pylint: disable=redefined-builtin</span>
    <span class="n">fallback_backend</span><span class="o">=</span><span class="s2">&quot;rdflib&quot;</span><span class="p">,</span>
    <span class="n">fallback_backend_kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Union[None, str]&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Serialise triplestore.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        destination: File name or object to write to.  If None, the</span>
<span class="sd">            serialisation is returned.</span>
<span class="sd">        format: Format to serialise as.  Supported formats, depends on</span>
<span class="sd">            the backend.</span>
<span class="sd">        fallback_backend: If the current backend doesn&#39;t implement</span>
<span class="sd">            serialisation, use the `fallback_backend` instead.</span>
<span class="sd">        fallback_backend_kwargs: Dict with additional keyword arguments</span>
<span class="sd">            for initialising `fallback_backend`.</span>
<span class="sd">        kwargs: Passed to the backend serialize() method.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Serialized string if `destination` is None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="p">,</span> <span class="s2">&quot;parse&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_method</span><span class="p">(</span><span class="s2">&quot;serialize&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span>
            <span class="n">destination</span><span class="o">=</span><span class="n">destination</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">fallback_backend_kwargs</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">fallback_backend_kwargs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">ts</span> <span class="o">=</span> <span class="n">Triplestore</span><span class="p">(</span><span class="n">backend</span><span class="o">=</span><span class="n">fallback_backend</span><span class="p">,</span> <span class="o">**</span><span class="n">fallback_backend_kwargs</span><span class="p">)</span>
    <span class="n">ts</span><span class="o">.</span><span class="n">add_triples</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">triples</span><span class="p">())</span>
    <span class="k">for</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">iri</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">namespaces</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">ts</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="n">iri</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ts</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">destination</span><span class="o">=</span><span class="n">destination</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="tripper.triplestore.Triplestore.set" class="doc doc-heading">
<code class="highlight language-python"><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">triple</span><span class="p">)</span></code>


<a href="#tripper.triplestore.Triplestore.set" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Convenience method to update the value of object.</p>
<p>Removes any existing triples for subject and predicate before adding
the given <code>triple</code>.</p>

        <details class="quote">
          <summary>Source code in <code>tripper/triplestore.py</code></summary>
          <div class="language-python highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">triple</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convenience method to update the value of object.</span>

<span class="sd">    Removes any existing triples for subject and predicate before adding</span>
<span class="sd">    the given `triple`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">triple</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">triple</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="tripper.triplestore.Triplestore.subject_objects" class="doc doc-heading">
<code class="highlight language-python"><span class="n">subject_objects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#tripper.triplestore.Triplestore.subject_objects" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Returns a generator of (subject, object) tuples for given
predicate.</p>

        <details class="quote">
          <summary>Source code in <code>tripper/triplestore.py</code></summary>
          <div class="language-python highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">subject_objects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a generator of (subject, object) tuples for given</span>
<span class="sd">    predicate.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">triples</span><span class="p">(</span><span class="n">predicate</span><span class="o">=</span><span class="n">predicate</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">s</span><span class="p">,</span> <span class="n">o</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="tripper.triplestore.Triplestore.subject_predicates" class="doc doc-heading">
<code class="highlight language-python"><span class="n">subject_predicates</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#tripper.triplestore.Triplestore.subject_predicates" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Returns a generator of (subject, predicate) tuples for given
object.</p>

        <details class="quote">
          <summary>Source code in <code>tripper/triplestore.py</code></summary>
          <div class="language-python highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">subject_predicates</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="o">=</span><span class="kc">None</span>
<span class="p">):</span>  <span class="c1"># pylint: disable=redefined-builtin</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a generator of (subject, predicate) tuples for given</span>
<span class="sd">    object.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">triples</span><span class="p">(</span><span class="nb">object</span><span class="o">=</span><span class="nb">object</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="tripper.triplestore.Triplestore.subjects" class="doc doc-heading">
<code class="highlight language-python"><span class="n">subjects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">object</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#tripper.triplestore.Triplestore.subjects" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Returns a generator of subjects for given predicate and object.</p>

        <details class="quote">
          <summary>Source code in <code>tripper/triplestore.py</code></summary>
          <div class="language-python highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">subjects</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">object</span><span class="o">=</span><span class="kc">None</span>  <span class="c1"># pylint: disable=redefined-builtin</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a generator of subjects for given predicate and object.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">triples</span><span class="p">(</span><span class="n">predicate</span><span class="o">=</span><span class="n">predicate</span><span class="p">,</span> <span class="nb">object</span><span class="o">=</span><span class="nb">object</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">s</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="tripper.triplestore.Triplestore.triples" class="doc doc-heading">
<code class="highlight language-python"><span class="n">triples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">object</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">triple</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#tripper.triplestore.Triplestore.triples" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Returns a generator over matching triples.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>subject</code></td>
        <td><code>&#39;Optional[Union[str, Triple]]&#39;</code></td>
        <td><p>If given, match triples with this subject.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>predicate</code></td>
        <td><code>&#39;Optional[str]&#39;</code></td>
        <td><p>If given, match triples with this predicate.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>object</code></td>
        <td><code>&#39;Optional[Union[str, Literal]]&#39;</code></td>
        <td><p>If given, match triples with this object.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>triple</code></td>
        <td><code>&#39;Optional[Triple]&#39;</code></td>
        <td><p>Deprecated. A <code>(s, p, o)</code> tuple where <code>s</code>, <code>p</code> and <code>o</code>
should either be None (matching anything) or an exact IRI
to match.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>&#39;Generator[Triple, None, None]&#39;</code></td>
      <td><p>Generator over all matching triples.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>tripper/triplestore.py</code></summary>
          <div class="language-python highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">triples</span><span class="p">(</span>  <span class="c1"># pylint: disable=redefined-builtin</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">subject</span><span class="p">:</span> <span class="s2">&quot;Optional[Union[str, Triple]]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">predicate</span><span class="p">:</span> <span class="s2">&quot;Optional[str]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="nb">object</span><span class="p">:</span> <span class="s2">&quot;Optional[Union[str, Literal]]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">triple</span><span class="p">:</span> <span class="s2">&quot;Optional[Triple]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Generator[Triple, None, None]&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a generator over matching triples.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        subject: If given, match triples with this subject.</span>
<span class="sd">        predicate: If given, match triples with this predicate.</span>
<span class="sd">        object: If given, match triples with this object.</span>
<span class="sd">        triple: Deprecated. A `(s, p, o)` tuple where `s`, `p` and `o`</span>
<span class="sd">            should either be None (matching anything) or an exact IRI</span>
<span class="sd">            to match.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Generator over all matching triples.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># __TODO__: Remove these lines when deprecated</span>
    <span class="k">if</span> <span class="n">triple</span> <span class="ow">or</span> <span class="p">(</span><span class="n">subject</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="nb">str</span><span class="p">)):</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="s2">&quot;The `triple` argument is deprecated.  Use `subject`, &quot;</span>
            <span class="s2">&quot;`predicate` and `object` arguments instead.&quot;</span><span class="p">,</span>
            <span class="ne">DeprecationWarning</span><span class="p">,</span>
            <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="n">subject</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">subject</span><span class="p">,</span> <span class="n">predicate</span><span class="p">,</span> <span class="nb">object</span> <span class="o">=</span> <span class="n">subject</span>
    <span class="k">elif</span> <span class="n">triple</span><span class="p">:</span>
        <span class="n">subject</span><span class="p">,</span> <span class="n">predicate</span><span class="p">,</span> <span class="nb">object</span> <span class="o">=</span> <span class="n">triple</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="n">subject</span><span class="p">,</span> <span class="n">predicate</span><span class="p">,</span> <span class="nb">object</span><span class="p">))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="tripper.triplestore.Triplestore.update" class="doc doc-heading">
<code class="highlight language-python"><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">iris</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">literals</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#tripper.triplestore.Triplestore.update" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Update triplestore with SPARQL.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>query</code></td>
        <td><code>str</code></td>
        <td><p>String with the SPARQL query.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>iris</code></td>
        <td><code>&#39;Optional[dict]&#39;</code></td>
        <td><p>Dict used for query substitutions that maps IRI variables
to IRIs. The IRIs may be provided as fully expanded or
prefixed with a prefix registered in the triplestore namespace.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>literals</code></td>
        <td><code>&#39;Optional[dict]&#39;</code></td>
        <td><p>Dict used for query substitutions that maps literal
variables to literals.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>kwargs</code></td>
        <td></td>
        <td><p>Keyword arguments passed to the backend update() method.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>      <div class="admonition note">
<p class="admonition-title">Note</p>
<p>See <code>query()</code> for how to the query substitution arguments <code>iris</code>
and <code>literals</code>.</p>
<p>This method is intended for INSERT and DELETE queries. Use
the query() method for SELECT, ASK, CONSTRUCT and DESCRIBE queries.</p>
</div>

        <details class="quote">
          <summary>Source code in <code>tripper/triplestore.py</code></summary>
          <div class="language-python highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">iris</span><span class="p">:</span> <span class="s2">&quot;Optional[dict]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">literals</span><span class="p">:</span> <span class="s2">&quot;Optional[dict]&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Update triplestore with SPARQL.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        query: String with the SPARQL query.</span>
<span class="sd">        iris: Dict used for query substitutions that maps IRI variables</span>
<span class="sd">            to IRIs. The IRIs may be provided as fully expanded or</span>
<span class="sd">            prefixed with a prefix registered in the triplestore namespace.</span>
<span class="sd">        literals: Dict used for query substitutions that maps literal</span>
<span class="sd">            variables to literals.</span>
<span class="sd">        kwargs: Keyword arguments passed to the backend update() method.</span>

<span class="sd">    Note:</span>
<span class="sd">        See `query()` for how to the query substitution arguments `iris`</span>
<span class="sd">        and `literals`.</span>

<span class="sd">        This method is intended for INSERT and DELETE queries. Use</span>
<span class="sd">        the query() method for SELECT, ASK, CONSTRUCT and DESCRIBE queries.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_method</span><span class="p">(</span><span class="s2">&quot;update&quot;</span><span class="p">)</span>
    <span class="n">new_query</span> <span class="o">=</span> <span class="n">substitute_query</span><span class="p">(</span>
        <span class="n">query</span><span class="p">,</span> <span class="n">iris</span><span class="o">=</span><span class="n">iris</span><span class="p">,</span> <span class="n">literals</span><span class="o">=</span><span class="n">literals</span><span class="p">,</span> <span class="n">prefixes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">namespaces</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">new_query</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="tripper.triplestore.Triplestore.value" class="doc doc-heading">
<code class="highlight language-python"><span class="n">value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">object</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">any</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#tripper.triplestore.Triplestore.value" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Return the value for a pair of two criteria.</p>
<p>Useful if one knows that there may only be one value.
Two of <code>subject</code>, <code>predicate</code> or <code>object</code> must be provided.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>subject</code></td>
        <td></td>
        <td><p>Possible criteria to match.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>predicate</code></td>
        <td></td>
        <td><p>Possible criteria to match.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>object</code></td>
        <td></td>
        <td><p>Possible criteria to match.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>default</code></td>
        <td></td>
        <td><p>Value to return if no matches are found.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>any</code></td>
        <td></td>
        <td><p>Used to define how many values to return. Can be set to:
<code>False</code> (default): return the value or raise UniquenessError
if there is more than one matching value.
<code>True</code>: return any matching value if there is more than one.
<code>None</code>: return a generator over all matching values.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>lang</code></td>
        <td></td>
        <td><p>If provided, require that the value must be a localised
literal with the given language code.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>&#39;Union[str, Literal]&#39;</code></td>
      <td><p>The value of the <code>subject</code>, <code>predicate</code> or <code>object</code> that is
None.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>tripper/triplestore.py</code></summary>
          <div class="language-python highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">value</span><span class="p">(</span>  <span class="c1"># pylint: disable=redefined-builtin</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">subject</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">predicate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="nb">object</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="nb">any</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">lang</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Union[str, Literal]&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the value for a pair of two criteria.</span>

<span class="sd">    Useful if one knows that there may only be one value.</span>
<span class="sd">    Two of `subject`, `predicate` or `object` must be provided.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        subject: Possible criteria to match.</span>
<span class="sd">        predicate: Possible criteria to match.</span>
<span class="sd">        object: Possible criteria to match.</span>
<span class="sd">        default: Value to return if no matches are found.</span>
<span class="sd">        any: Used to define how many values to return. Can be set to:</span>
<span class="sd">            `False` (default): return the value or raise UniquenessError</span>
<span class="sd">            if there is more than one matching value.</span>
<span class="sd">            `True`: return any matching value if there is more than one.</span>
<span class="sd">            `None`: return a generator over all matching values.</span>
<span class="sd">        lang: If provided, require that the value must be a localised</span>
<span class="sd">            literal with the given language code.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The value of the `subject`, `predicate` or `object` that is</span>
<span class="sd">        None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">spo</span> <span class="o">=</span> <span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="n">predicate</span><span class="p">,</span> <span class="nb">object</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">sum</span><span class="p">(</span><span class="n">iri</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">iri</span> <span class="ow">in</span> <span class="n">spo</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;Exactly one of `subject`, `predicate` or `object` must be &quot;</span>
            <span class="s2">&quot;None.&quot;</span>
        <span class="p">)</span>

    <span class="c1"># Index of subject-predicate-object argument that is None</span>
    <span class="p">(</span><span class="n">idx</span><span class="p">,)</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">spo</span><span class="p">)</span> <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">]</span>

    <span class="n">triples</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">triples</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="n">predicate</span><span class="p">,</span> <span class="nb">object</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">lang</span><span class="p">:</span>
        <span class="n">triples</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">t</span>
            <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">triples</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="n">idx</span><span class="p">],</span> <span class="n">Literal</span><span class="p">)</span>
            <span class="ow">and</span> <span class="n">t</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">lang</span> <span class="o">==</span> <span class="n">lang</span>  <span class="c1"># type: ignore</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="nb">any</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">triples</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">triples</span><span class="p">)[</span><span class="n">idx</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">default</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="nb">next</span><span class="p">(</span><span class="n">triples</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="k">if</span> <span class="nb">any</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">value</span>
    <span class="k">raise</span> <span class="n">UniquenessError</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;More than one match: </span><span class="si">{</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span><span class="w"> </span><span class="n">predicate</span><span class="p">,</span><span class="w"> </span><span class="nb">object</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022-2025 SINTEF
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com/EMMC-ASBL" target="_blank" rel="noopener" title="EMMC-ASBL on GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M448 96c0-35.3-28.7-64-64-64H64C28.7 32 0 60.7 0 96v320c0 35.3 28.7 64 64 64h320c35.3 0 64-28.7 64-64zM265.8 407.7c0-1.8 0-6 .1-11.6.1-11.4.1-28.8.1-43.7 0-15.6-5.2-25.5-11.3-30.7 37-4.1 76-9.2 76-73.1 0-18.2-6.5-27.3-17.1-39 1.7-4.3 7.4-22-1.7-45-13.9-4.3-45.7 17.9-45.7 17.9-13.2-3.7-27.5-5.6-41.6-5.6s-28.4 1.9-41.6 5.6c0 0-31.8-22.2-45.7-17.9-9.1 22.9-3.5 40.6-1.7 45-10.6 11.7-15.6 20.8-15.6 39 0 63.6 37.3 69 74.3 73.1-4.8 4.3-9.1 11.7-10.6 22.3-9.5 4.3-33.8 11.7-48.3-13.9-9.1-15.8-25.5-17.1-25.5-17.1-16.2-.2-1.1 10.2-1.1 10.2 10.8 5 18.4 24.2 18.4 24.2 9.7 29.7 56.1 19.7 56.1 19.7 0 9 .1 21.7.1 30.6 0 4.8.1 8.6.1 10 0 4.3-3 9.5-11.5 8-66-22.1-112.2-84.9-112.2-158.3 0-91.8 70.2-161.5 162-161.5S388 165.6 388 257.4c.1 73.4-44.7 136.3-110.7 158.3-8.4 1.5-11.5-3.7-11.5-8m-90.5-54.8c-.2-1.5 1.1-2.8 3-3.2 1.9-.2 3.7.6 3.9 1.9.3 1.3-1 2.6-3 3-1.9.4-3.7-.4-3.9-1.7m-9.1 3.2c-2.2.2-3.7-.9-3.7-2.4 0-1.3 1.5-2.4 3.5-2.4 1.9-.2 3.7.9 3.7 2.4 0 1.3-1.5 2.4-3.5 2.4m-14.3-2.2c-1.9-.4-3.2-1.9-2.8-3.2s2.4-1.9 4.1-1.5c2 .6 3.3 2.1 2.8 3.4-.4 1.3-2.4 1.9-4.1 1.3m-12.5-7.3c-1.5-1.3-1.9-3.2-.9-4.1.9-1.1 2.8-.9 4.3.6 1.3 1.3 1.8 3.3.9 4.1-.9 1.1-2.8.9-4.3-.6m-8.5-10c-1.1-1.5-1.1-3.2 0-3.9 1.1-.9 2.8-.2 3.7 1.3 1.1 1.5 1.1 3.3 0 4.1-.9.6-2.6 0-3.7-1.5m-6.3-8.8c-1.1-1.3-1.3-2.8-.4-3.5.9-.9 2.4-.4 3.5.6 1.1 1.3 1.3 2.8.4 3.5-.9.9-2.4.4-3.5-.6m-6-6.4c-1.3-.6-1.9-1.7-1.5-2.6.4-.6 1.5-.9 2.8-.4 1.3.7 1.9 1.8 1.5 2.6-.4.9-1.7 1.1-2.8.4"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.top", "content.tabs.link"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "latest", "provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>